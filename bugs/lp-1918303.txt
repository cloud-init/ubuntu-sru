https://github.com/canonical/cloud-init/commit/b794d426b9ab43ea9d6371477466070d86e10668

=== Begin SRU Template ===
[Impact]
This change writes passwords only to serial console instead of also writing to
cloud-init-output.log. It also changes permissions of cloud-init-output.log to
not be world readable.

[Test Case]
There is an upstream test for this bug:
https://github.com/canonical/cloud-init/blob/master/tests/integration_tests/modules/test_set_password.py

=== Xenial ===
============================= test session starts ==============================
platform linux -- Python 3.5.9, pytest-5.4.2, py-1.8.1, pluggy-0.13.1
rootdir: /home/james/cloud-init, inifile: tox.ini
plugins: cov-2.9.0
collected 18 items

tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_no_duplicate_users_in_shadow Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:26:33 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
Detected image: image_id=xenial os=ubuntu release=xenial
2021-04-15 19:26:33 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=xenial
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
2021-04-15 19:26:43 INFO      integration_testing:clouds.py:128 Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=xenial
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
Setting up environment for lxd_container
2021-04-15 19:26:43 INFO      integration_testing:conftest.py:156 Setting up environment for lxd_container
Launching instance with launch_kwargs:
user_data=None
image_id=ubuntu:d5023e529240e2411f0d0cdb01445b8f5dd2931dc31430abee59d276c52db9e2
2021-04-15 19:26:43 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=None
image_id=ubuntu:d5023e529240e2411f0d0cdb01445b8f5dd2931dc31430abee59d276c52db9e2
['lxc', 'init', 'ubuntu:d5023e529240e2411f0d0cdb01445b8f5dd2931dc31430abee59d276c52db9e2', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n']
2021-04-15 19:26:51 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:26:52 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.34
Retrying SSH connection to ubuntu@10.37.179.34:22 (598s left)
2021-04-15 19:26:53 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.2p2)
2021-04-15 19:26:53 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:26:54 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:26:54 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=complete-frog)
2021-04-15 19:26:57 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=complete-frog)
2021-04-15 19:26:57 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~16.04.1
2021-04-15 19:26:57 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~16.04.1
2021-04-15 19:26:57 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210413
2021-04-15 19:26:57 INFO      integration_testing:clouds.py:181 image serial: 20210413
Installing proposed image
2021-04-15 19:26:57 INFO      integration_testing:instances.py:144 Installing proposed image
2021-04-15 19:26:57 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'echo deb "http://archive.ubuntu.com/ubuntu $(lsb_release -sc)-proposed main" | tee /etc/apt/sources.list.d/proposed.list
apt-get update -q
apt-get install -qy cloud-init'
2021-04-15 19:27:09 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init -v'
Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~16.04.1
2021-04-15 19:27:09 INFO      integration_testing:instances.py:136 Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~16.04.1
2021-04-15 19:27:09 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:27:10 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:27:10 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:27:10 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:27:10 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:27:10 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
Created new image: local:complete-frog-snapshot
2021-04-15 19:27:53 INFO      integration_testing:instances.py:113 Created new image: local:complete-frog-snapshot
Done with environment setup
2021-04-15 19:27:54 INFO      integration_testing:conftest.py:162 Done with environment setup
Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:complete-frog-snapshot
2021-04-15 19:27:54 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:complete-frog-snapshot
['lxc', 'init', 'local:complete-frog-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n  list:\n    - tom:mypassword123!\n    - dick:RANDOM\n    - harry:RANDOM\n    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:28:07 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:28:09 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.34
Retrying SSH connection to ubuntu@10.37.179.34:22 (598s left)
2021-04-15 19:28:10 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.2p2)
2021-04-15 19:28:10 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:28:10 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:28:11 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=welcome-sunbird)
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=welcome-sunbird)
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~16.04.1
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~16.04.1
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210413
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:181 image serial: 20210413
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_users_dict_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_chpasswd_list_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_emitted_to_serial_console Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_explicit_password_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_shadow_expected_users Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_sshd_config Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:12 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:12 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_no_duplicate_users_in_shadow Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:14 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:complete-frog-snapshot
2021-04-15 19:28:14 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:complete-frog-snapshot
['lxc', 'init', 'local:complete-frog-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n    list: |\n      tom:mypassword123!\n      dick:RANDOM\n      harry:RANDOM\n      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:28:16 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:28:17 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.130
Retrying SSH connection to ubuntu@10.37.179.130:22 (598s left)
2021-04-15 19:28:18 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.2p2)
2021-04-15 19:28:18 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:28:18 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:28:18 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=firm-treefrog)
2021-04-15 19:28:19 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=firm-treefrog)
2021-04-15 19:28:19 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~16.04.1
2021-04-15 19:28:19 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~16.04.1
2021-04-15 19:28:19 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210413
2021-04-15 19:28:19 INFO      integration_testing:clouds.py:181 image serial: 20210413
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:19 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_users_dict_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:19 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:19 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_chpasswd_list_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:19 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:19 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:19 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:19 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_emitted_to_serial_console Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_explicit_password_set_correctly Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_shadow_expected_users Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_sshd_config Detected image: image_id=xenial os=ubuntu release=xenial

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=xenial os=ubuntu release=xenial
-------------------------------- live log call ---------------------------------
2021-04-15 19:28:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSEDDeleting snapshot image created for this testrun: local:complete-frog-snapshot

------------------------------ live log teardown -------------------------------
2021-04-15 19:28:21 INFO      integration_testing:clouds.py:202 Deleting snapshot image created for this testrun: local:complete-frog-snapshot


======================== 18 passed in 108.66s (0:01:48) ========================


=== Bionic ===
============================= test session starts ==============================
platform linux -- Python 3.5.9, pytest-5.4.2, py-1.8.1, pluggy-0.13.1
rootdir: /home/james/cloud-init, inifile: tox.ini
plugins: cov-2.9.0
collected 18 items

tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_no_duplicate_users_in_shadow Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:28:23 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
Detected image: image_id=bionic os=ubuntu release=bionic
2021-04-15 19:28:23 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=bionic
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
2021-04-15 19:28:33 INFO      integration_testing:clouds.py:128 Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=bionic
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
Setting up environment for lxd_container
2021-04-15 19:28:33 INFO      integration_testing:conftest.py:156 Setting up environment for lxd_container
Launching instance with launch_kwargs:
image_id=ubuntu:9a30ffb2faeea61cce6012c63071a1f1504a76e1dbbe03e575cc313170fdaf43
user_data=None
2021-04-15 19:28:33 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
image_id=ubuntu:9a30ffb2faeea61cce6012c63071a1f1504a76e1dbbe03e575cc313170fdaf43
user_data=None
['lxc', 'init', 'ubuntu:9a30ffb2faeea61cce6012c63071a1f1504a76e1dbbe03e575cc313170fdaf43', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n']
2021-04-15 19:29:08 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:29:09 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.224
Retrying SSH connection to ubuntu@10.37.179.224:22 (598s left)
2021-04-15 19:29:10 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-04-15 19:29:10 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:29:11 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:29:11 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=lasting-stag)
2021-04-15 19:29:15 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=lasting-stag)
2021-04-15 19:29:15 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~18.04.1
2021-04-15 19:29:16 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~18.04.1
2021-04-15 19:29:16 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210412
2021-04-15 19:29:16 INFO      integration_testing:clouds.py:181 image serial: 20210412
Installing proposed image
2021-04-15 19:29:16 INFO      integration_testing:instances.py:144 Installing proposed image
2021-04-15 19:29:16 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'echo deb "http://archive.ubuntu.com/ubuntu $(lsb_release -sc)-proposed main" | tee /etc/apt/sources.list.d/proposed.list
apt-get update -q
apt-get install -qy cloud-init'
2021-04-15 19:29:28 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init -v'
Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~18.04.1
2021-04-15 19:29:28 INFO      integration_testing:instances.py:136 Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~18.04.1
2021-04-15 19:29:28 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:29:28 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:29:28 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:29:29 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:29:29 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:29:29 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
Created new image: local:lasting-stag-snapshot
2021-04-15 19:30:21 INFO      integration_testing:instances.py:113 Created new image: local:lasting-stag-snapshot
Done with environment setup
2021-04-15 19:30:23 INFO      integration_testing:conftest.py:162 Done with environment setup
Launching instance with launch_kwargs:
image_id=local:lasting-stag-snapshot
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

2021-04-15 19:30:23 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
image_id=local:lasting-stag-snapshot
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

['lxc', 'init', 'local:lasting-stag-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n  list:\n    - tom:mypassword123!\n    - dick:RANDOM\n    - harry:RANDOM\n    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:30:41 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:30:44 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.74
Retrying SSH connection to ubuntu@10.37.179.74:22 (597s left)
2021-04-15 19:30:45 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-04-15 19:30:45 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:30:46 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:30:47 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=evident-ghoul)
2021-04-15 19:30:50 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=evident-ghoul)
2021-04-15 19:30:50 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~18.04.1
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~18.04.1
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210412
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:181 image serial: 20210412
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_users_dict_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_chpasswd_list_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_emitted_to_serial_console Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_explicit_password_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_shadow_expected_users Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_sshd_config Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:30:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_no_duplicate_users_in_shadow Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:30:52 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=local:lasting-stag-snapshot
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

2021-04-15 19:30:52 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
image_id=local:lasting-stag-snapshot
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

['lxc', 'init', 'local:lasting-stag-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n    list: |\n      tom:mypassword123!\n      dick:RANDOM\n      harry:RANDOM\n      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:30:55 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:30:57 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.56
Retrying SSH connection to ubuntu@10.37.179.56:22 (597s left)
2021-04-15 19:30:58 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-04-15 19:30:58 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:30:59 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:30:59 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=intimate-lioness)
2021-04-15 19:31:03 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=intimate-lioness)
2021-04-15 19:31:03 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~18.04.1
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~18.04.1
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210412
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:181 image serial: 20210412
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_users_dict_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_chpasswd_list_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_emitted_to_serial_console Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_explicit_password_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_shadow_expected_users Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_sshd_config Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:04 INFO      integration_testing:clouds.py:87 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-04-15 19:31:04 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSEDDeleting snapshot image created for this testrun: local:lasting-stag-snapshot

------------------------------ live log teardown -------------------------------
2021-04-15 19:31:06 INFO      integration_testing:clouds.py:202 Deleting snapshot image created for this testrun: local:lasting-stag-snapshot


======================== 18 passed in 162.66s (0:02:42) ========================


=== Focal ===
============================= test session starts ==============================
platform linux -- Python 3.5.9, pytest-5.4.2, py-1.8.1, pluggy-0.13.1
rootdir: /home/james/cloud-init, inifile: tox.ini
plugins: cov-2.9.0
collected 18 items

tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_no_duplicate_users_in_shadow Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:31:08 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
Detected image: image_id=focal os=ubuntu release=focal
2021-04-15 19:31:08 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=focal
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
2021-04-15 19:31:17 INFO      integration_testing:clouds.py:128 Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=focal
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
Setting up environment for lxd_container
2021-04-15 19:31:17 INFO      integration_testing:conftest.py:156 Setting up environment for lxd_container
Launching instance with launch_kwargs:
user_data=None
image_id=ubuntu:58a3d2a034ed1cbde9a507e0a777a93370a57b6def56edf14b19e9c936bc60d2
2021-04-15 19:31:17 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=None
image_id=ubuntu:58a3d2a034ed1cbde9a507e0a777a93370a57b6def56edf14b19e9c936bc60d2
['lxc', 'init', 'ubuntu:58a3d2a034ed1cbde9a507e0a777a93370a57b6def56edf14b19e9c936bc60d2', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n']
2021-04-15 19:31:23 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:31:25 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.181
Retrying SSH connection to ubuntu@10.37.179.181:22 (597s left)
2021-04-15 19:31:26 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.181
Retrying SSH connection to ubuntu@10.37.179.181:22 (596s left)
2021-04-15 19:31:27 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_8.2p1)
2021-04-15 19:31:28 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:31:28 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:31:28 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=tough-spider)
2021-04-15 19:31:34 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=tough-spider)
2021-04-15 19:31:34 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~20.04.1
2021-04-15 19:31:35 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~20.04.1
2021-04-15 19:31:35 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210413
2021-04-15 19:31:35 INFO      integration_testing:clouds.py:181 image serial: 20210413
Installing proposed image
2021-04-15 19:31:35 INFO      integration_testing:instances.py:144 Installing proposed image
2021-04-15 19:31:35 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'echo deb "http://archive.ubuntu.com/ubuntu $(lsb_release -sc)-proposed main" | tee /etc/apt/sources.list.d/proposed.list
apt-get update -q
apt-get install -qy cloud-init'
2021-04-15 19:31:49 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init -v'
Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~20.04.1
2021-04-15 19:31:49 INFO      integration_testing:instances.py:136 Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~20.04.1
2021-04-15 19:31:49 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:31:49 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:31:49 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:31:50 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:31:50 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:31:50 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
Created new image: local:tough-spider-snapshot
2021-04-15 19:32:52 INFO      integration_testing:instances.py:113 Created new image: local:tough-spider-snapshot
Done with environment setup
2021-04-15 19:32:53 INFO      integration_testing:conftest.py:162 Done with environment setup
Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:tough-spider-snapshot
2021-04-15 19:32:53 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:tough-spider-snapshot
['lxc', 'init', 'local:tough-spider-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n  list:\n    - tom:mypassword123!\n    - dick:RANDOM\n    - harry:RANDOM\n    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:33:08 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:33:11 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.147
Retrying SSH connection to ubuntu@10.37.179.147:22 (597s left)
2021-04-15 19:33:12 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.147
Retrying SSH connection to ubuntu@10.37.179.147:22 (595s left)
2021-04-15 19:33:14 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.147
Retrying SSH connection to ubuntu@10.37.179.147:22 (594s left)
2021-04-15 19:33:15 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_8.2p1)
2021-04-15 19:33:15 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:33:16 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:33:16 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=flexible-coral)
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=flexible-coral)
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.04.1
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.04.1
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210413
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:181 image serial: 20210413
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_users_dict_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_chpasswd_list_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_emitted_to_serial_console Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_explicit_password_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_shadow_expected_users Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_sshd_config Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:20 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:20 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_no_duplicate_users_in_shadow Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:22 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:tough-spider-snapshot
2021-04-15 19:33:22 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:tough-spider-snapshot
['lxc', 'init', 'local:tough-spider-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n    list: |\n      tom:mypassword123!\n      dick:RANDOM\n      harry:RANDOM\n      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:33:26 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:33:28 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.118
Retrying SSH connection to ubuntu@10.37.179.118:22 (597s left)
2021-04-15 19:33:29 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_8.2p1)
2021-04-15 19:33:29 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:33:30 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:33:31 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=fancy-parrot)
2021-04-15 19:33:35 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=fancy-parrot)
2021-04-15 19:33:35 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.04.1
2021-04-15 19:33:35 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.04.1
2021-04-15 19:33:35 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210413
2021-04-15 19:33:35 INFO      integration_testing:clouds.py:181 image serial: 20210413
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:35 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_users_dict_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:36 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_chpasswd_list_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:36 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:36 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:36 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_emitted_to_serial_console Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_explicit_password_set_correctly Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:36 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_shadow_expected_users Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:36 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_sshd_config Detected image: image_id=focal os=ubuntu release=focal

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:36 INFO      integration_testing:clouds.py:87 Detected image: image_id=focal os=ubuntu release=focal
-------------------------------- live log call ---------------------------------
2021-04-15 19:33:36 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSEDDeleting snapshot image created for this testrun: local:tough-spider-snapshot

------------------------------ live log teardown -------------------------------
2021-04-15 19:33:38 INFO      integration_testing:clouds.py:202 Deleting snapshot image created for this testrun: local:tough-spider-snapshot


======================== 18 passed in 150.65s (0:02:30) ========================


=== Groovy ===
============================= test session starts ==============================
platform linux -- Python 3.5.9, pytest-5.4.2, py-1.8.1, pluggy-0.13.1
rootdir: /home/james/cloud-init, inifile: tox.ini
plugins: cov-2.9.0
collected 18 items

tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_no_duplicate_users_in_shadow Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:33:41 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
Detected image: image_id=groovy os=ubuntu release=groovy
2021-04-15 19:33:41 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=groovy
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
2021-04-15 19:33:50 INFO      integration_testing:clouds.py:128 Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/tmp/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
OS_IMAGE=groovy
PLATFORM=lxd_container
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
Setting up environment for lxd_container
2021-04-15 19:33:50 INFO      integration_testing:conftest.py:156 Setting up environment for lxd_container
Launching instance with launch_kwargs:
user_data=None
image_id=ubuntu:b60ca561d15874facba6b2e74e9bb6fb4e22ac94d84abca3d3033718a861cef4
2021-04-15 19:33:50 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=None
image_id=ubuntu:b60ca561d15874facba6b2e74e9bb6fb4e22ac94d84abca3d3033718a861cef4
['lxc', 'init', 'ubuntu:b60ca561d15874facba6b2e74e9bb6fb4e22ac94d84abca3d3033718a861cef4', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n']
2021-04-15 19:33:55 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:33:59 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.37
Retrying SSH connection to ubuntu@10.37.179.37:22 (596s left)
2021-04-15 19:34:00 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.37
Retrying SSH connection to ubuntu@10.37.179.37:22 (595s left)
2021-04-15 19:34:01 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_8.3p1)
2021-04-15 19:34:02 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:34:02 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:34:03 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=electric-pig)
2021-04-15 19:34:11 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=electric-pig)
2021-04-15 19:34:11 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~20.10.1
2021-04-15 19:34:11 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 20.4.1-0ubuntu1~20.10.1
2021-04-15 19:34:11 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210414
2021-04-15 19:34:11 INFO      integration_testing:clouds.py:181 image serial: 20210414
Installing proposed image
2021-04-15 19:34:11 INFO      integration_testing:instances.py:144 Installing proposed image
2021-04-15 19:34:11 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'echo deb "http://archive.ubuntu.com/ubuntu $(lsb_release -sc)-proposed main" | tee /etc/apt/sources.list.d/proposed.list
apt-get update -q
apt-get install -qy cloud-init'
2021-04-15 19:34:27 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init -v'
Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~20.10.1
2021-04-15 19:34:27 INFO      integration_testing:instances.py:136 Installed cloud-init version: 21.1-19-gbad84ad4-0ubuntu1~20.10.1
2021-04-15 19:34:27 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:34:27 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:34:27 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:34:27 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-04-15 19:34:28 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo cloud-init clean --logs'
2021-04-15 19:34:28 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'sudo rm -rf /var/log/syslog'
Created new image: local:electric-pig-snapshot
2021-04-15 19:35:16 INFO      integration_testing:instances.py:113 Created new image: local:electric-pig-snapshot
Done with environment setup
2021-04-15 19:35:16 INFO      integration_testing:conftest.py:162 Done with environment setup
Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:electric-pig-snapshot
2021-04-15 19:35:16 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:electric-pig-snapshot
['lxc', 'init', 'local:electric-pig-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n  list:\n    - tom:mypassword123!\n    - dick:RANDOM\n    - harry:RANDOM\n    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:35:28 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:35:29 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.214
Retrying SSH connection to ubuntu@10.37.179.214:22 (598s left)
2021-04-15 19:35:31 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.214
Retrying SSH connection to ubuntu@10.37.179.214:22 (597s left)
2021-04-15 19:35:32 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_8.3p1)
2021-04-15 19:35:32 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:35:32 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:35:33 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=credible-gelding)
2021-04-15 19:35:37 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=credible-gelding)
2021-04-15 19:35:37 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.10.1
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.10.1
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210414
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:181 image serial: 20210414
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_users_dict_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_chpasswd_list_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_emitted_to_serial_console Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_explicit_password_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_shadow_expected_users Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_sshd_config Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:38 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:38 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_no_duplicate_users_in_shadow Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:39 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:electric-pig-snapshot
2021-04-15 19:35:39 INFO      integration_testing:clouds.py:167 Launching instance with launch_kwargs:
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

image_id=local:electric-pig-snapshot
['lxc', 'init', 'local:electric-pig-snapshot', '--config', 'user.meta-data=public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDJMS8gdKw0kA1PDwAVkURrxgjbAgWVeiBq+VSOI1jFLafONDwkc0ZVriZofmCZ1BVjixCA6kqVQsmA88Av7eeI3jGvy4fwX+TKhDQk28rRC9mNz8nBLfB+gp3wfcgFJrVeekhjV+fgxiyq1wJC4WcJZfXKdXvsNTBzhd2RNZAsyKyRKBRahv57/KJjXozS94p83l0qq/gi6pYYBTTkLz65SiyVCUpkddgXDPfxEXqjsx6ha3VCdoKBdRgh3p2toADzcYafyqxDMPtfLJE+BofSA4Gi9YQAMhshdk4tzI+KYcq07cd8AtreXpVyZLC3r7cfe4m2IK7UvVSbTItYoUItN255P1M09eLQNlbbrJwnxuX3IUwxBkYZhVUIaEOQreWTnc+tg20ZK3olUzNWcJBurpeT5i6Hg/QoRrQSanVLFx8hff4l1V9Yxb23txlv9e2Pzh0i/0YVmrVlQxuen/5YyWNm553D1EfH8fEon3xVAqrbC8NS63GaP0QhGo7rlYs= james@newt\n', '--config', 'user.user-data=#cloud-config\nssh_pwauth: yes\nusers:\n  - default\n  - name: tom\n    # md5 gotomgo\n    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"\n    lock_passwd: false\n  - name: dick\n    # md5 gocubsgo\n    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"\n    lock_passwd: false\n  - name: harry\n    # sha512 goharrygo\n    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"\n    lock_passwd: false\n  - name: jane\n    # sha256 gojanego\n    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."\n    lock_passwd: false\n  - name: "mikey"\n    lock_passwd: false\n\nchpasswd:\n    list: |\n      tom:mypassword123!\n      dick:RANDOM\n      harry:RANDOM\n      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89\n']
2021-04-15 19:35:42 INFO      pycloudlib.instance:instance.py:165 executing: sh -c whoami
2021-04-15 19:35:43 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.107
Retrying SSH connection to ubuntu@10.37.179.107:22 (598s left)
2021-04-15 19:35:44 INFO      pycloudlib.instance:instance.py:343 [Errno None] Unable to connect to port 22 on 10.37.179.107
Retrying SSH connection to ubuntu@10.37.179.107:22 (597s left)
2021-04-15 19:35:45 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_8.3p1)
2021-04-15 19:35:45 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-04-15 19:35:45 INFO      pycloudlib.instance:instance.py:165 executing: sh -c 'cloud-init status --help'
2021-04-15 19:35:46 INFO      pycloudlib.instance:instance.py:165 executing: cloud-init status --wait --long
Launched instance: LXDInstance(name=singular-bluejay)
2021-04-15 19:35:50 INFO      integration_testing:clouds.py:171 Launched instance: LXDInstance(name=singular-bluejay)
2021-04-15 19:35:50 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.10.1
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:177 cloud-init version: /usr/bin/cloud-init 21.1-19-gbad84ad4-0ubuntu1~20.10.1
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210414
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:181 image serial: 20210414
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_users_dict_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_chpasswd_list_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_emitted_to_serial_console Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_explicit_password_set_correctly Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_shadow_expected_users Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_sshd_config Detected image: image_id=groovy os=ubuntu release=groovy

-------------------------------- live log setup --------------------------------
2021-04-15 19:35:51 INFO      integration_testing:clouds.py:87 Detected image: image_id=groovy os=ubuntu release=groovy
-------------------------------- live log call ---------------------------------
2021-04-15 19:35:51 INFO      pycloudlib.instance:instance.py:165 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSEDDeleting snapshot image created for this testrun: local:electric-pig-snapshot

------------------------------ live log teardown -------------------------------
2021-04-15 19:35:52 INFO      integration_testing:clouds.py:202 Deleting snapshot image created for this testrun: local:electric-pig-snapshot


======================== 18 passed in 132.24s (0:02:12) ========================


[Regression Potential]
If anybody was using/parsing cloud-init-output.log for a password generated
by cloud-init, they will no longer be able to do so.
