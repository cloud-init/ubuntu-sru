# Manual Oracle upgrade and clean install validation

SRU_SERIES="xenial bionic"

# local values
LP_USER="daniel-thewatkins"

cat > sethostname.yaml << EOF
## template: jinja
#cloud-config
ssh_import_id : [$LP_USER]
hostname: SRU-worked-{{v1.cloud_name}}
EOF

cat > setup_proposed.sh <<EOF
#/bin/bash
mirror=http://archive.ubuntu.com/ubuntu
echo deb \$mirror \$(lsb_release -sc)-proposed main | tee /etc/apt/sources.list.d/proposed.list
apt-get update -q
apt-get install -qy cloud-init
EOF

sshopts=( -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o LogLevel=ERROR )
for series in $SRU_SERIES; do
  echo "### BEGIN $series"
  if [ "$series" = "xenial" ]; then
    netcfg="/etc/network/interfaces.d/50-cloud-init.cfg"
  else
    netcfg="/etc/netplan/50-cloud-init.yaml"
  fi

  # TODO: Use the Oracle CLI
  echo "Please manually launch a $series instance in Oracle and enter its IP address"
  echo "(Don't forget to add your SSH public key to the instance when you launch it.)"
  read -p "$series IP address: " VM_IP

  while ! ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init status --wait --long; do
      sleep 5
  done

  # Capture current state
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- dpkg-query --show cloud-init
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo cat /run/cloud-init/result.json
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- grep Trace /var/log/cloud-init.log
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze blame
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze show
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze blame
  echo 'Networking config'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cat $netcfg

  # Upgrade to -proposed cloud-init and reboot
  scp "${sshopts[@]}" setup_proposed.sh ubuntu@$VM_IP:.
  ssh "${sshopts[@]}" ubuntu@$VM_IP sudo bash ./setup_proposed.sh 2>&1 | egrep 'cloud-init'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- dpkg-query --show cloud-init
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo hostname SRU-didnt-work
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo rm -f $netcfg
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo cloud-init clean --logs --reboot
  ssh-keygen -f "/home/ubuntu/.ssh/known_hosts" -R $VM_IP

  sleep 10  # Wait for the instance to actually go down
  while ! ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init status --wait --long; do
      sleep 1
  done

  ssh "${sshopts[@]}" ubuntu@$VM_IP -- hostname
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- "grep Trace /var/log/cloud-init*"
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze blame
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze show
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze blame
  echo 'After upgrade Networking config'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cat $netcfg
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init query --format "'cloud-region: {{cloud_name}}-{{region}}'"
  echo "Get cloud-id"
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-id
  echo 'Validating whether metadata is being updated per boot LP:1819913'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- "grep 'Update datasource' /var/log/cloud-init.log"
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo reboot || true

  sleep 10  # Wait for the instance to actually go down
  while ! ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init status --wait --long; do
      sleep 1
  done
  echo 'After reboot'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- "grep 'Update datasource' /var/log/cloud-init.log"
done

echo "Don't forget to clean up your instances!"
### BEGIN xenial
Please manually launch a xenial instance in Oracle and enter its IP address
(Don't forget to add your SSH public key to the instance when you launch it.)
.....................................
status: done
time: Fri, 04 Oct 2019 19:12:38 +0000
detail:
DataSourceOpenStack [net,ver=2]
cloud-init	19.2-24-ge7881d5c-0ubuntu1~16.04.1
{
 "v1": {
  "datasource": "DataSourceOpenStack [net,ver=2]",
  "errors": []
 }
}
Traceback (most recent call last):
Traceback (most recent call last):
Startup finished in 12.300s (kernel) + 27.448s (userspace) = 39.749s
         10.712s snapd.seeded.service
          8.245s cloud-init.service
          3.326s cloud-config.service
          1.926s cloud-init-local.service
          1.778s apparmor.service
          1.381s console-setup.service
          1.271s pollinate.service
          1.168s dev-sda1.device
           963ms snapd.service
           692ms lvm2-monitor.service
           622ms cloud-final.service
           504ms netfilter-persistent.service
           436ms iscsid.service
           409ms accounts-daemon.service
           386ms lxd-containers.service
           305ms keyboard-setup.service
           279ms grub-common.service
           244ms mdadm.service
           200ms lxd.socket
           184ms systemd-timesyncd.service
           174ms apport.service
           173ms systemd-logind.service
           172ms systemd-modules-load.service
           171ms polkitd.service
           169ms irqbalance.service
           153ms rsyslog.service
           149ms systemd-journald.service
           143ms systemd-tmpfiles-setup-dev.service
           140ms dev-hugepages.mount
           134ms ufw.service
           128ms systemd-remount-fs.service
           125ms systemd-sysctl.service
           123ms systemd-udev-trigger.service
           121ms ondemand.service
           119ms sys-fs-fuse-connections.mount
           116ms networking.service
           112ms run-rpc_pipefs.mount
           102ms sys-kernel-config.mount
           102ms resolvconf.service
           102ms kmod-static-nodes.service
            96ms sys-kernel-debug.mount
            86ms systemd-journal-flush.service
            78ms plymouth-read-write.service
            76ms systemd-machine-id-commit.service
            74ms snap-core-7396.mount
            73ms nfs-config.service
            67ms open-iscsi.service
            65ms dev-mqueue.mount
            61ms systemd-udevd.service
            56ms systemd-tmpfiles-setup.service
            44ms systemd-user-sessions.service
            42ms systemd-update-utmp.service
            38ms iscsi-cleanup.service
            37ms ssh.service
            33ms systemd-random-seed.service
            30ms snap-oracle\x2dcloud\x2dagent-4.mount
            30ms plymouth-quit.service
            24ms rc-local.service
            21ms user@1000.service
            21ms systemd-update-utmp-runlevel.service
            19ms plymouth-quit-wait.service
            16ms boot-efi.mount
            12ms dev-loop1.device
            10ms setvtrgb.service
             7ms snapd.socket
             4ms dev-loop0.device
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.01400s +00.00000s
|`->no local data found from DataSourceOpenStackLocal @00.03200s +00.09900s
Finished stage: (init-local) 00.17300 seconds 

Starting stage: init-network
|`->no cache found @00.70000s +00.00100s
|`->found network data from DataSourceOpenStack @00.70700s +06.56600s
|`->setting up datasource @07.47700s +00.00000s
|`->reading and applying user-data @07.49800s +00.00300s
|`->reading and applying vendor-data @07.50100s +00.00000s
|`->activating datasource @07.53000s +00.00100s
|`->config-migrator ran successfully @07.55700s +00.00000s
|`->config-seed_random ran successfully @07.55700s +00.00100s
|`->config-bootcmd ran successfully @07.55800s +00.00100s
|`->config-write-files ran successfully @07.55900s +00.00100s
|`->config-growpart ran successfully @07.56000s +00.11200s
|`->config-resizefs ran successfully @07.67300s +00.07100s
|`->config-disk_setup ran successfully @07.74500s +00.00200s
|`->config-mounts ran successfully @07.74800s +00.02900s
|`->config-set_hostname ran successfully @07.77800s +00.00100s
|`->config-update_hostname ran successfully @07.77900s +00.00100s
|`->config-update_etc_hosts ran successfully @07.78100s +00.00100s
|`->config-ca-certs ran successfully @07.78200s +00.00100s
|`->config-rsyslog ran successfully @07.78300s +00.00100s
|`->config-users-groups ran successfully @07.78400s +00.13200s
|`->config-ssh ran successfully @07.91700s +00.60500s
Finished stage: (init-network) 07.83800 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @21.21000s +00.00000s
|`->config-snap ran successfully @21.21000s +00.00200s
|`->config-snap_config ran successfully @21.21200s +00.00100s
|`->config-ssh-import-id ran successfully @21.21300s +00.00200s
|`->config-locale ran successfully @21.21500s +01.92500s
|`->config-set-passwords ran successfully @23.14100s +00.00100s
|`->config-grub-dpkg ran successfully @23.14300s +00.24900s
|`->config-apt-pipelining ran successfully @23.39200s +00.00200s
|`->config-apt-configure ran successfully @23.39400s +00.12400s
|`->config-ubuntu-advantage ran successfully @23.51800s +00.00200s
|`->config-ntp ran successfully @23.52000s +00.00200s
|`->config-timezone ran successfully @23.52200s +00.00100s
|`->config-disable-ec2-metadata ran successfully @23.52400s +00.00000s
|`->config-runcmd ran successfully @23.52400s +00.00100s
|`->config-byobu ran successfully @23.52600s +00.00100s
Finished stage: (modules-config) 02.40700 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @24.01300s +00.00200s
|`->config-package-update-upgrade-install ran successfully @24.01500s +00.00100s
|`->config-fan ran successfully @24.01600s +00.00100s
|`->config-landscape ran successfully @24.01700s +00.00100s
|`->config-lxd ran successfully @24.01800s +00.00100s
|`->config-ubuntu-drivers ran successfully @24.01900s +00.00100s
|`->config-puppet ran successfully @24.02000s +00.00100s
|`->config-chef ran successfully @24.02100s +00.00100s
|`->config-mcollective ran successfully @24.02200s +00.00100s
|`->config-salt-minion ran successfully @24.02300s +00.00100s
|`->config-rightscale_userdata ran successfully @24.02400s +00.00100s
|`->config-scripts-vendor ran successfully @24.02500s +00.00100s
|`->config-scripts-per-once ran successfully @24.02600s +00.00100s
|`->config-scripts-per-boot ran successfully @24.02700s +00.00000s
|`->config-scripts-per-instance ran successfully @24.02700s +00.00100s
|`->config-scripts-user ran successfully @24.02800s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @24.02900s +00.02800s
|`->config-keys-to-console ran successfully @24.05800s +00.10800s
|`->config-phone-home ran successfully @24.16700s +00.00100s
|`->config-final-message ran successfully @24.16800s +00.00500s
|`->config-power-state-change ran successfully @24.17300s +00.00100s
Finished stage: (modules-final) 00.19200 seconds 

Total Time: 10.61000 seconds

1 boot records analyzed
-- Boot Record 01 --
     06.56600s (init-network/search-OpenStack)
     01.92500s (modules-config/config-locale)
     00.60500s (init-network/config-ssh)
     00.24900s (modules-config/config-grub-dpkg)
     00.13200s (init-network/config-users-groups)
     00.12400s (modules-config/config-apt-configure)
     00.11200s (init-network/config-growpart)
     00.10800s (modules-final/config-keys-to-console)
     00.09900s (init-local/search-OpenStackLocal)
     00.07100s (init-network/config-resizefs)
     00.02900s (init-network/config-mounts)
     00.02800s (modules-final/config-ssh-authkey-fingerprints)
     00.00500s (modules-final/config-final-message)
     00.00300s (init-network/consume-user-data)
     00.00200s (modules-final/config-snappy)
     00.00200s (modules-config/config-ubuntu-advantage)
     00.00200s (modules-config/config-ssh-import-id)
     00.00200s (modules-config/config-snap)
     00.00200s (modules-config/config-ntp)
     00.00200s (modules-config/config-apt-pipelining)
     00.00200s (init-network/config-disk_setup)
     00.00100s (modules-final/config-ubuntu-drivers)
     00.00100s (modules-final/config-scripts-vendor)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-scripts-per-instance)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-puppet)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-phone-home)
     00.00100s (modules-final/config-package-update-upgrade-install)
     00.00100s (modules-final/config-mcollective)
     00.00100s (modules-final/config-lxd)
     00.00100s (modules-final/config-landscape)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-final/config-chef)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-runcmd)
     00.00100s (modules-config/config-byobu)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-update_etc_hosts)
     00.00100s (init-network/config-set_hostname)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/config-rsyslog)
     00.00100s (init-network/config-ca-certs)
     00.00100s (init-network/config-bootcmd)
     00.00100s (init-network/check-cache)
     00.00100s (init-network/activate-datasource)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-migrator)
     00.00000s (init-local/check-cache)

1 boot records analyzed
Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
auto lo
iface lo inet loopback

# control-manual ens3
iface ens3 inet dhcp
    broadcast 10.0.0.255
    dns-nameservers 169.254.169.254
    dns-search canonical.oraclevcn.com
    gateway 10.0.0.1
  cloud-init
Get:1 http://archive.ubuntu.com/ubuntu xenial-proposed/main amd64 cloud-init all 19.2-36-g059d049c-0ubuntu2~16.04.1 [408 kB]
Preparing to unpack .../cloud-init_19.2-36-g059d049c-0ubuntu2~16.04.1_all.deb ...
Unpacking cloud-init (19.2-36-g059d049c-0ubuntu2~16.04.1) over (19.2-24-ge7881d5c-0ubuntu1~16.04.1) ...
Setting up cloud-init (19.2-36-g059d049c-0ubuntu2~16.04.1) ...
Leaving 'diversion of /etc/init/ureadahead.conf to /etc/init/ureadahead.conf.disabled by cloud-init'
cloud-init	19.2-36-g059d049c-0ubuntu2~16.04.1
.........
status: done
time: Fri, 04 Oct 2019 19:14:32 +0000
detail:
DataSourceOpenStack [net,ver=2]
oddbloke-20191004-1509
/var/log/cloud-init.log:Traceback (most recent call last):
/var/log/cloud-init.log:Traceback (most recent call last):
Startup finished in 18.908s (kernel) + 15.970s (userspace) = 34.879s
          6.436s cloud-init.service
          2.843s cloud-config.service
          1.948s snapd.service
          1.690s dev-sda1.device
          1.357s cloud-init-local.service
           652ms cloud-final.service
           509ms lxd-containers.service
           468ms apparmor.service
           465ms lvm2-monitor.service
           463ms netfilter-persistent.service
           424ms accounts-daemon.service
           384ms console-setup.service
           372ms open-iscsi.service
           325ms grub-common.service
           323ms systemd-logind.service
           294ms iscsi-cleanup.service
           267ms iscsid.service
           250ms ssh.service
           218ms systemd-timesyncd.service
           214ms mdadm.service
           213ms irqbalance.service
           200ms apport.service
           188ms resolvconf.service
           179ms dev-loop0.device
           177ms snapd.seeded.service
           172ms ufw.service
           170ms ondemand.service
           169ms keyboard-setup.service
           168ms rc-local.service
           162ms systemd-remount-fs.service
           162ms sys-kernel-debug.mount
           157ms run-rpc_pipefs.mount
           157ms kmod-static-nodes.service
           149ms polkitd.service
           144ms dev-mqueue.mount
           141ms rsyslog.service
           122ms systemd-udev-trigger.service
           120ms networking.service
           107ms systemd-journald.service
           106ms systemd-modules-load.service
           103ms dev-loop1.device
            90ms systemd-update-utmp.service
            82ms systemd-journal-flush.service
            75ms systemd-udevd.service
            73ms dev-hugepages.mount
            67ms nfs-config.service
            59ms systemd-tmpfiles-setup-dev.service
            58ms sys-fs-fuse-connections.mount
            56ms snap-oracle\x2dcloud\x2dagent-4.mount
            52ms systemd-sysctl.service
            49ms plymouth-read-write.service
            45ms sys-kernel-config.mount
            43ms lxd.socket
            41ms systemd-tmpfiles-setup.service
            30ms snap-core-7396.mount
            25ms systemd-random-seed.service
            19ms user@1000.service
            19ms systemd-update-utmp-runlevel.service
            18ms plymouth-quit.service
            18ms boot-efi.mount
            17ms snapd.socket
            13ms systemd-user-sessions.service
             8ms setvtrgb.service
             5ms plymouth-quit-wait.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00500s +00.00100s
|`->no local data found from DataSourceOpenStackLocal @00.02000s +00.08700s
Finished stage: (init-local) 00.17100 seconds 

Starting stage: init-network
|`->no cache found @00.71500s +00.00000s
|`->found network data from DataSourceOpenStack @00.72100s +05.10700s
|`->setting up datasource @05.98100s +00.00000s
|`->reading and applying user-data @06.00900s +00.00600s
|`->reading and applying vendor-data @06.01500s +00.00100s
|`->activating datasource @06.08500s +00.00200s
|`->config-migrator ran successfully @06.11300s +00.00000s
|`->config-seed_random ran successfully @06.11400s +00.00000s
|`->config-bootcmd ran successfully @06.11500s +00.00000s
|`->config-write-files ran successfully @06.11500s +00.00100s
|`->config-growpart ran successfully @06.11600s +00.07400s
|`->config-resizefs ran successfully @06.19000s +00.02100s
|`->config-disk_setup ran successfully @06.21100s +00.00200s
|`->config-mounts ran successfully @06.21400s +00.09200s
|`->config-set_hostname ran successfully @06.30600s +00.00200s
|`->config-update_hostname ran successfully @06.30800s +00.00100s
|`->config-update_etc_hosts ran successfully @06.30900s +00.00100s
|`->config-ca-certs ran successfully @06.31000s +00.00100s
|`->config-rsyslog ran successfully @06.31100s +00.00100s
|`->config-users-groups ran successfully @06.31200s +00.06700s
|`->config-ssh ran successfully @06.37900s +00.29300s
Finished stage: (init-network) 05.97600 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @10.90000s +00.00100s
|`->config-snap ran successfully @10.90200s +00.00100s
|`->config-snap_config ran successfully @10.90400s +00.00100s
|`->config-ssh-import-id ran successfully @10.90600s +00.00200s
|`->config-locale ran successfully @10.91200s +00.00300s
|`->config-set-passwords ran successfully @10.92400s +00.00100s
|`->config-grub-dpkg ran successfully @10.92600s +00.53100s
|`->config-apt-pipelining ran successfully @11.45800s +00.00100s
|`->config-apt-configure ran successfully @11.46000s +00.57700s
|`->config-ubuntu-advantage ran successfully @12.03800s +00.00300s
|`->config-ntp ran successfully @12.04100s +00.00200s
|`->config-timezone ran successfully @12.04300s +00.00100s
|`->config-disable-ec2-metadata ran successfully @12.04400s +00.00000s
|`->config-runcmd ran successfully @12.04500s +00.00100s
|`->config-byobu ran successfully @12.04600s +00.00200s
Finished stage: (modules-config) 01.21300 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @12.53700s +00.00100s
|`->config-package-update-upgrade-install ran successfully @12.53900s +00.00000s
|`->config-fan ran successfully @12.54000s +00.00000s
|`->config-landscape ran successfully @12.54100s +00.00000s
|`->config-lxd ran successfully @12.54200s +00.00000s
|`->config-ubuntu-drivers ran successfully @12.54300s +00.00000s
|`->config-puppet ran successfully @12.54400s +00.00000s
|`->config-chef ran successfully @12.54500s +00.00000s
|`->config-mcollective ran successfully @12.54600s +00.00000s
|`->config-salt-minion ran successfully @12.54700s +00.00000s
|`->config-rightscale_userdata ran successfully @12.54700s +00.00100s
|`->config-scripts-vendor ran successfully @12.54800s +00.00100s
|`->config-scripts-per-once ran successfully @12.54900s +00.00100s
|`->config-scripts-per-boot ran successfully @12.55000s +00.00000s
|`->config-scripts-per-instance ran successfully @12.55100s +00.00000s
|`->config-scripts-user ran successfully @12.55200s +00.00000s
|`->config-ssh-authkey-fingerprints ran successfully @12.55300s +00.07600s
|`->config-keys-to-console ran successfully @12.63000s +00.07900s
|`->config-phone-home ran successfully @12.70900s +00.00200s
|`->config-final-message ran successfully @12.71100s +00.00500s
|`->config-power-state-change ran successfully @12.71600s +00.00100s
Finished stage: (modules-final) 00.21200 seconds 

Total Time: 7.57200 seconds

1 boot records analyzed
-- Boot Record 01 --
     05.10700s (init-network/search-OpenStack)
     00.57700s (modules-config/config-apt-configure)
     00.53100s (modules-config/config-grub-dpkg)
     00.29300s (init-network/config-ssh)
     00.09200s (init-network/config-mounts)
     00.08700s (init-local/search-OpenStackLocal)
     00.07900s (modules-final/config-keys-to-console)
     00.07600s (modules-final/config-ssh-authkey-fingerprints)
     00.07400s (init-network/config-growpart)
     00.06700s (init-network/config-users-groups)
     00.02100s (init-network/config-resizefs)
     00.00600s (init-network/consume-user-data)
     00.00500s (modules-final/config-final-message)
     00.00300s (modules-config/config-ubuntu-advantage)
     00.00300s (modules-config/config-locale)
     00.00200s (modules-final/config-phone-home)
     00.00200s (modules-config/config-ssh-import-id)
     00.00200s (modules-config/config-ntp)
     00.00200s (modules-config/config-byobu)
     00.00200s (init-network/config-set_hostname)
     00.00200s (init-network/config-disk_setup)
     00.00200s (init-network/activate-datasource)
     00.00100s (modules-final/config-snappy)
     00.00100s (modules-final/config-scripts-vendor)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-snap)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-runcmd)
     00.00100s (modules-config/config-emit_upstart)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/consume-vendor-data)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-update_etc_hosts)
     00.00100s (init-network/config-rsyslog)
     00.00100s (init-network/config-ca-certs)
     00.00100s (init-local/check-cache)
     00.00000s (modules-final/config-ubuntu-drivers)
     00.00000s (modules-final/config-scripts-user)
     00.00000s (modules-final/config-scripts-per-instance)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-final/config-salt-minion)
     00.00000s (modules-final/config-puppet)
     00.00000s (modules-final/config-package-update-upgrade-install)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-final/config-lxd)
     00.00000s (modules-final/config-landscape)
     00.00000s (modules-final/config-fan)
     00.00000s (modules-final/config-chef)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/config-seed_random)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-network/check-cache)

1 boot records analyzed
After upgrade Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
auto lo
iface lo inet loopback

# control-manual ens3
iface ens3 inet dhcp
    broadcast 10.0.0.255
    dns-nameservers 169.254.169.254
    dns-search canonical.oraclevcn.com
    gateway 10.0.0.1
cloud-region: openstack-None
Get cloud-id
openstack
Validating whether metadata is being updated per boot LP:1819913
2019-10-04 19:14:19,384 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:14:20,085 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
.......
status: done
time: Fri, 04 Oct 2019 19:16:04 +0000
detail:
DataSourceOpenStack [net,ver=2]
After reboot
2019-10-04 19:14:19,384 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:14:20,085 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:15:53,723 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:15:54,407 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
### BEGIN bionic
Please manually launch a bionic instance in Oracle and enter its IP address
(Don't forget to add your SSH public key to the instance when you launch it.)

status: done
time: Fri, 04 Oct 2019 19:14:25 +0000
detail:
DataSourceOpenStack [net,ver=2]
cloud-init	19.2-24-ge7881d5c-0ubuntu1~18.04.1
{
 "v1": {
  "datasource": "DataSourceOpenStack [net,ver=2]",
  "errors": []
 }
}
Traceback (most recent call last):
Traceback (most recent call last):
Startup finished in 12.447s (kernel) + 25.480s (userspace) = 37.928s
graphical.target reached after 22.289s in userspace
          8.967s snapd.seeded.service
          7.443s cloud-init.service
          2.298s cloud-config.service
          1.716s dev-sda1.device
          1.536s cloud-init-local.service
          1.336s keyboard-setup.service
          1.223s pollinate.service
          1.075s apparmor.service
           881ms cloud-final.service
           611ms networkd-dispatcher.service
           483ms netfilter-persistent.service
           482ms lxd-containers.service
           366ms systemd-udev-trigger.service
           315ms accounts-daemon.service
           295ms grub-common.service
           278ms systemd-timesyncd.service
           251ms iscsid.service
           241ms lvm2-monitor.service
           230ms systemd-journald.service
           213ms ebtables.service
           210ms systemd-logind.service
           204ms apport.service
           192ms rsyslog.service
           191ms ufw.service
           184ms kmod-static-nodes.service
           181ms run-rpc_pipefs.mount
           181ms systemd-machine-id-commit.service
           172ms dev-hugepages.mount
           168ms systemd-remount-fs.service
           163ms sys-kernel-debug.mount
           147ms systemd-resolved.service
           144ms polkit.service
           141ms snapd.service
           134ms systemd-modules-load.service
           130ms dev-mqueue.mount
           112ms systemd-udevd.service
            83ms systemd-sysctl.service
            81ms systemd-tmpfiles-setup-dev.service
            77ms systemd-update-utmp.service
            64ms systemd-journal-flush.service
            63ms console-setup.service
            60ms blk-availability.service
            60ms iscsi-cleanup.service
            57ms plymouth-read-write.service
            53ms systemd-tmpfiles-setup.service
            52ms systemd-networkd.service
            50ms sys-kernel-config.mount
            49ms nfs-config.service
            44ms lxd.socket
            43ms ssh.service
            41ms rpcbind.service
            41ms sys-fs-fuse-connections.mount
            37ms snap-core-7396.mount
            36ms user@1001.service
            34ms snap-oracle\x2dcloud\x2dagent-4.mount
            31ms plymouth-quit.service
            31ms systemd-user-sessions.service
            24ms setvtrgb.service
            23ms systemd-random-seed.service
            21ms dev-loop0.device
            17ms systemd-networkd-wait-online.service
            17ms systemd-update-utmp-runlevel.service
            15ms boot-efi.mount
            14ms snapd.socket
            12ms dev-loop1.device
            10ms plymouth-quit-wait.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00400s +00.00100s
|`->no local data found from DataSourceOpenStackLocal @00.03500s +00.10400s
Finished stage: (init-local) 00.33400 seconds 

Starting stage: init-network
|`->no cache found @00.99800s +00.00000s
|`->found network data from DataSourceOpenStack @01.02000s +05.16000s
|`->setting up datasource @06.46300s +00.00100s
|`->reading and applying user-data @06.47800s +00.00300s
|`->reading and applying vendor-data @06.48100s +00.00000s
|`->activating datasource @06.50600s +00.00200s
|`->config-migrator ran successfully @06.53100s +00.00100s
|`->config-seed_random ran successfully @06.53200s +00.00100s
|`->config-bootcmd ran successfully @06.53300s +00.00000s
|`->config-write-files ran successfully @06.53300s +00.00100s
|`->config-growpart ran successfully @06.53400s +00.16200s
|`->config-resizefs ran successfully @06.69600s +00.51800s
|`->config-disk_setup ran successfully @07.21400s +00.00100s
|`->config-mounts ran successfully @07.21600s +00.03300s
|`->config-set_hostname ran successfully @07.24900s +00.00200s
|`->config-update_hostname ran successfully @07.25100s +00.00100s
|`->config-update_etc_hosts ran successfully @07.25200s +00.00100s
|`->config-ca-certs ran successfully @07.25400s +00.00000s
|`->config-rsyslog ran successfully @07.25500s +00.00000s
|`->config-users-groups ran successfully @07.25600s +00.14300s
|`->config-ssh ran successfully @07.39900s +00.25100s
Finished stage: (init-network) 06.66900 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @19.08400s +00.00000s
|`->config-snap ran successfully @19.08500s +00.00900s
|`->config-snap_config ran successfully @19.09400s +00.00100s
|`->config-ssh-import-id ran successfully @19.09500s +00.00200s
|`->config-locale ran successfully @19.09800s +00.00100s
|`->config-set-passwords ran successfully @19.10000s +00.00100s
|`->config-grub-dpkg ran successfully @19.10100s +00.57500s
|`->config-apt-pipelining ran successfully @19.68300s +00.00200s
|`->config-apt-configure ran successfully @19.68500s +00.28200s
|`->config-ubuntu-advantage ran successfully @19.96900s +00.00100s
|`->config-ntp ran successfully @19.97100s +00.00100s
|`->config-timezone ran successfully @19.97200s +00.00100s
|`->config-disable-ec2-metadata ran successfully @19.97300s +00.00100s
|`->config-runcmd ran successfully @19.97400s +00.00100s
|`->config-byobu ran successfully @19.98500s +00.00100s
Finished stage: (modules-config) 00.97900 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @20.82500s +00.00200s
|`->config-package-update-upgrade-install ran successfully @20.82700s +00.00100s
|`->config-fan ran successfully @20.82800s +00.00100s
|`->config-landscape ran successfully @20.82900s +00.00000s
|`->config-lxd ran successfully @20.83000s +00.00000s
|`->config-ubuntu-drivers ran successfully @20.83100s +00.00000s
|`->config-puppet ran successfully @20.83200s +00.00000s
|`->config-chef ran successfully @20.83300s +00.00000s
|`->config-mcollective ran successfully @20.83300s +00.00100s
|`->config-salt-minion ran successfully @20.83400s +00.00100s
|`->config-rightscale_userdata ran successfully @20.83500s +00.00100s
|`->config-scripts-vendor ran successfully @20.83600s +00.00100s
|`->config-scripts-per-once ran successfully @20.83700s +00.00100s
|`->config-scripts-per-boot ran successfully @20.83800s +00.00000s
|`->config-scripts-per-instance ran successfully @20.83800s +00.00100s
|`->config-scripts-user ran successfully @20.83900s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @20.84000s +00.05300s
|`->config-keys-to-console ran successfully @20.89300s +00.02500s
|`->config-phone-home ran successfully @20.91900s +00.00200s
|`->config-final-message ran successfully @20.92200s +00.01100s
|`->config-power-state-change ran successfully @20.93400s +00.00100s
Finished stage: (modules-final) 00.14200 seconds 

Total Time: 8.12400 seconds

1 boot records analyzed
-- Boot Record 01 --
     05.16000s (init-network/search-OpenStack)
     00.57500s (modules-config/config-grub-dpkg)
     00.51800s (init-network/config-resizefs)
     00.28200s (modules-config/config-apt-configure)
     00.25100s (init-network/config-ssh)
     00.16200s (init-network/config-growpart)
     00.14300s (init-network/config-users-groups)
     00.10400s (init-local/search-OpenStackLocal)
     00.05300s (modules-final/config-ssh-authkey-fingerprints)
     00.03300s (init-network/config-mounts)
     00.02500s (modules-final/config-keys-to-console)
     00.01100s (modules-final/config-final-message)
     00.00900s (modules-config/config-snap)
     00.00300s (init-network/consume-user-data)
     00.00200s (modules-final/config-snappy)
     00.00200s (modules-final/config-phone-home)
     00.00200s (modules-config/config-ssh-import-id)
     00.00200s (modules-config/config-apt-pipelining)
     00.00200s (init-network/config-set_hostname)
     00.00200s (init-network/activate-datasource)
     00.00100s (modules-final/config-scripts-vendor)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-scripts-per-instance)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-package-update-upgrade-install)
     00.00100s (modules-final/config-mcollective)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-runcmd)
     00.00100s (modules-config/config-ntp)
     00.00100s (modules-config/config-locale)
     00.00100s (modules-config/config-disable-ec2-metadata)
     00.00100s (modules-config/config-byobu)
     00.00100s (init-network/setup-datasource)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-update_etc_hosts)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/config-migrator)
     00.00100s (init-network/config-disk_setup)
     00.00100s (init-local/check-cache)
     00.00000s (modules-final/config-ubuntu-drivers)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-final/config-puppet)
     00.00000s (modules-final/config-lxd)
     00.00000s (modules-final/config-landscape)
     00.00000s (modules-final/config-chef)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-rsyslog)
     00.00000s (init-network/config-ca-certs)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-network/check-cache)

1 boot records analyzed
Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    version: 2
    ethernets:
        ens3:
            dhcp4: true
            match:
                macaddress: 00:00:17:02:c0:26
            set-name: ens3
  cloud-init
Get:1 http://archive.ubuntu.com/ubuntu bionic-proposed/main amd64 cloud-init all 19.2-36-g059d049c-0ubuntu2~18.04.1 [404 kB]
Preparing to unpack .../cloud-init_19.2-36-g059d049c-0ubuntu2~18.04.1_all.deb ...
Unpacking cloud-init (19.2-36-g059d049c-0ubuntu2~18.04.1) over (19.2-24-ge7881d5c-0ubuntu1~18.04.1) ...
Setting up cloud-init (19.2-36-g059d049c-0ubuntu2~18.04.1) ...
cloud-init	19.2-36-g059d049c-0ubuntu2~18.04.1
....
status: done
time: Fri, 04 Oct 2019 19:18:22 +0000
detail:
DataSourceOpenStack [net,ver=2]
oddbloke-20191004-1512
/var/log/cloud-init.log:Traceback (most recent call last):
/var/log/cloud-init.log:Traceback (most recent call last):
Startup finished in 15.721s (kernel) + 17.171s (userspace) = 32.893s
graphical.target reached after 12.819s in userspace
          6.723s cloud-init.service
          2.991s cloud-config.service
          1.785s dev-sda1.device
          1.546s cloud-init-local.service
          1.363s cloud-final.service
          1.352s keyboard-setup.service
           995ms networkd-dispatcher.service
           912ms snapd.service
           662ms lxd-containers.service
           644ms accounts-daemon.service
           462ms apparmor.service
           404ms netfilter-persistent.service
           371ms iscsid.service
           341ms systemd-logind.service
           321ms systemd-journald.service
           309ms systemd-udev-trigger.service
           293ms grub-common.service
           281ms lvm2-monitor.service
           271ms systemd-timesyncd.service
           266ms systemd-modules-load.service
           205ms ssh.service
           204ms rsyslog.service
           204ms apport.service
           202ms systemd-udevd.service
           175ms polkit.service
           170ms run-rpc_pipefs.mount
           159ms dev-loop0.device
           150ms systemd-resolved.service
           134ms systemd-remount-fs.service
           132ms kmod-static-nodes.service
           126ms snapd.seeded.service
           123ms ufw.service
           115ms dev-loop1.device
           104ms ebtables.service
            98ms systemd-tmpfiles-setup.service
            92ms sys-kernel-debug.mount
            89ms dev-mqueue.mount
            84ms dev-hugepages.mount
            83ms systemd-journal-flush.service
            78ms lxd.socket
            78ms blk-availability.service
            78ms snap-oracle\x2dcloud\x2dagent-4.mount
            78ms iscsi-cleanup.service
            74ms systemd-tmpfiles-setup-dev.service
            64ms systemd-sysctl.service
            59ms snapd.socket
            56ms rpcbind.service
            55ms systemd-networkd.service
            55ms console-setup.service
            46ms systemd-user-sessions.service
            46ms snap-core-7396.mount
            40ms nfs-config.service
            35ms user@1001.service
            34ms plymouth-quit.service
            32ms systemd-update-utmp.service
            31ms plymouth-read-write.service
            30ms setvtrgb.service
            24ms sys-fs-fuse-connections.mount
            21ms systemd-networkd-wait-online.service
            17ms boot-efi.mount
            13ms systemd-random-seed.service
            12ms systemd-update-utmp-runlevel.service
            11ms plymouth-quit-wait.service
            11ms sys-kernel-config.mount
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00500s +00.00000s
|`->no local data found from DataSourceOpenStackLocal @00.03500s +00.10700s
Finished stage: (init-local) 00.33100 seconds 

Starting stage: init-network
|`->no cache found @01.01200s +00.00000s
|`->found network data from DataSourceOpenStack @01.03300s +05.10300s
|`->setting up datasource @06.47200s +00.00000s
|`->reading and applying user-data @06.48700s +00.00200s
|`->reading and applying vendor-data @06.48900s +00.00000s
|`->activating datasource @06.51500s +00.00100s
|`->config-migrator ran successfully @06.54000s +00.00000s
|`->config-seed_random ran successfully @06.54100s +00.00100s
|`->config-bootcmd ran successfully @06.54200s +00.00000s
|`->config-write-files ran successfully @06.54200s +00.00100s
|`->config-growpart ran successfully @06.54300s +00.07900s
|`->config-resizefs ran successfully @06.62200s +00.04100s
|`->config-disk_setup ran successfully @06.66300s +00.00200s
|`->config-mounts ran successfully @06.66600s +00.04600s
|`->config-set_hostname ran successfully @06.71200s +00.00100s
|`->config-update_hostname ran successfully @06.71400s +00.00100s
|`->config-update_etc_hosts ran successfully @06.71500s +00.00000s
|`->config-ca-certs ran successfully @06.71600s +00.00000s
|`->config-rsyslog ran successfully @06.71700s +00.00000s
|`->config-users-groups ran successfully @06.71700s +00.04300s
|`->config-ssh ran successfully @06.76100s +00.34600s
Finished stage: (init-network) 06.11200 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @10.43600s +00.00000s
|`->config-snap ran successfully @10.43700s +00.00100s
|`->config-snap_config ran successfully @10.43800s +00.00100s
|`->config-ssh-import-id ran successfully @10.44000s +00.00900s
|`->config-locale ran successfully @10.45000s +00.00200s
|`->config-set-passwords ran successfully @10.45200s +00.00100s
|`->config-grub-dpkg ran successfully @10.45400s +00.62500s
|`->config-apt-pipelining ran successfully @11.08000s +00.00200s
|`->config-apt-configure ran successfully @11.08200s +00.38200s
|`->config-ubuntu-advantage ran successfully @11.46400s +00.00200s
|`->config-ntp ran successfully @11.46600s +00.00100s
|`->config-timezone ran successfully @11.46700s +00.00100s
|`->config-disable-ec2-metadata ran successfully @11.46900s +00.00000s
|`->config-runcmd ran successfully @11.46900s +00.00200s
|`->config-byobu ran successfully @11.47100s +00.00600s
Finished stage: (modules-config) 01.13600 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @12.79200s +00.00100s
|`->config-package-update-upgrade-install ran successfully @12.79400s +00.00000s
|`->config-fan ran successfully @12.79500s +00.00000s
|`->config-landscape ran successfully @12.79500s +00.00100s
|`->config-lxd ran successfully @12.79600s +00.00100s
|`->config-ubuntu-drivers ran successfully @12.79700s +00.00100s
|`->config-puppet ran successfully @12.79800s +00.00100s
|`->config-chef ran successfully @12.79900s +00.00100s
|`->config-mcollective ran successfully @12.80000s +00.00000s
|`->config-salt-minion ran successfully @12.80100s +00.00000s
|`->config-rightscale_userdata ran successfully @12.80100s +00.00100s
|`->config-scripts-vendor ran successfully @12.80200s +00.00100s
|`->config-scripts-per-once ran successfully @12.80300s +00.00100s
|`->config-scripts-per-boot ran successfully @12.80400s +00.00000s
|`->config-scripts-per-instance ran successfully @12.80400s +00.00100s
|`->config-scripts-user ran successfully @12.80500s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @12.80600s +00.05200s
|`->config-keys-to-console ran successfully @12.85900s +00.06200s
|`->config-phone-home ran successfully @12.92100s +00.00200s
|`->config-final-message ran successfully @12.92300s +00.00500s
|`->config-power-state-change ran successfully @12.92800s +00.00100s
Finished stage: (modules-final) 00.17100 seconds 

Total Time: 7.75000 seconds

1 boot records analyzed
-- Boot Record 01 --
     05.10300s (init-network/search-OpenStack)
     00.62500s (modules-config/config-grub-dpkg)
     00.38200s (modules-config/config-apt-configure)
     00.34600s (init-network/config-ssh)
     00.10700s (init-local/search-OpenStackLocal)
     00.07900s (init-network/config-growpart)
     00.06200s (modules-final/config-keys-to-console)
     00.05200s (modules-final/config-ssh-authkey-fingerprints)
     00.04600s (init-network/config-mounts)
     00.04300s (init-network/config-users-groups)
     00.04100s (init-network/config-resizefs)
     00.00900s (modules-config/config-ssh-import-id)
     00.00600s (modules-config/config-byobu)
     00.00500s (modules-final/config-final-message)
     00.00200s (modules-final/config-phone-home)
     00.00200s (modules-config/config-ubuntu-advantage)
     00.00200s (modules-config/config-runcmd)
     00.00200s (modules-config/config-locale)
     00.00200s (modules-config/config-apt-pipelining)
     00.00200s (init-network/consume-user-data)
     00.00200s (init-network/config-disk_setup)
     00.00100s (modules-final/config-ubuntu-drivers)
     00.00100s (modules-final/config-snappy)
     00.00100s (modules-final/config-scripts-vendor)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-scripts-per-instance)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-puppet)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-lxd)
     00.00100s (modules-final/config-landscape)
     00.00100s (modules-final/config-chef)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-snap)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-ntp)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-set_hostname)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/activate-datasource)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-final/config-salt-minion)
     00.00000s (modules-final/config-package-update-upgrade-install)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-final/config-fan)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-rsyslog)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-ca-certs)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-network/check-cache)
     00.00000s (init-local/check-cache)

1 boot records analyzed
After upgrade Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    version: 2
    ethernets:
        ens3:
            dhcp4: true
            match:
                macaddress: 00:00:17:02:c0:26
            set-name: ens3
cloud-region: openstack-None
Get cloud-id
openstack
Validating whether metadata is being updated per boot LP:1819913
2019-10-04 19:18:09,470 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:18:10,467 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
..
status: done
time: Fri, 04 Oct 2019 19:19:52 +0000
detail:
DataSourceOpenStack [net,ver=2]
After reboot
2019-10-04 19:18:09,470 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:18:10,467 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:19:40,656 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-10-04 19:19:41,644 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
Don't forget to clean up your instances!
