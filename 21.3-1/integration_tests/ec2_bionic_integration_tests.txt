============================= test session starts ==============================
platform linux -- Python 3.5.10, pytest-6.1.2, py-1.10.0, pluggy-0.13.1
rootdir: /home/james/cloud-init-tests, configfile: tox.ini
plugins: cov-2.11.1
collected 149 items

tests/integration_tests/test_logging.py::TestVarLogCloudInitOutput::test_var_log_cloud_init_output_not_world_readable Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 16:39:28 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 16:39:28 INFO      botocore.credentials:credentials.py:1217 Found credentials in shared credentials file: ~/.aws/credentials
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 16:39:28 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/home/james/tmp_home/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
ORACLE_AVAILABILITY_DOMAIN=qIZq:PHX-AD-3
OS_IMAGE=bionic
PLATFORM=ec2
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
2021-09-09 16:39:37 INFO      integration_testing:clouds.py:129 Settings:
CLOUD_INIT_SOURCE=PROPOSED
COLLECT_LOGS=NEVER
EXISTING_INSTANCE_ID=None
INSTANCE_TYPE=None
KEEP_IMAGE=False
KEEP_INSTANCE=False
KEYPAIR_NAME=None
LOCAL_LOG_PATH=/home/james/tmp_home/cloud_init_test_logs
OPENSTACK_NETWORK=falcojr_admin_net
ORACLE_AVAILABILITY_DOMAIN=qIZq:PHX-AD-3
OS_IMAGE=bionic
PLATFORM=ec2
PUBLIC_SSH_KEY=None
RUN_UNSTABLE=False
Setting up environment for ec2
2021-09-09 16:39:37 INFO      integration_testing:conftest.py:156 Setting up environment for ec2
Launching instance with launch_kwargs:
image_id=ami-08853a6c93b952e8b
user_data=None
2021-09-09 16:39:37 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08853a6c93b952e8b
user_data=None
2021-09-09 16:40:09 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:40:13 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:40:14 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:40:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:40:16 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:40:16 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:40:16 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:40:19 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0384c666e18d30a90'))
2021-09-09 16:40:30 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0384c666e18d30a90'))
2021-09-09 16:40:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.2-3-g899bfaa9-0ubuntu2~18.04.1
2021-09-09 16:40:30 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.2-3-g899bfaa9-0ubuntu2~18.04.1
2021-09-09 16:40:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 16:40:30 INFO      integration_testing:clouds.py:183 image serial: 20210907
Installing proposed image
2021-09-09 16:40:30 INFO      integration_testing:instances.py:150 Installing proposed image
2021-09-09 16:40:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'echo deb "http://archive.ubuntu.com/ubuntu $(lsb_release -sc)-proposed main" >> /etc/apt/sources.list.d/proposed.list'
2021-09-09 16:40:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-get update -q'
2021-09-09 16:40:39 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-get install -qy cloud-init'
2021-09-09 16:40:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init -v'
Installed cloud-init version: 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:40:46 INFO      integration_testing:instances.py:137 Installed cloud-init version: 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:40:46 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'sudo cloud-init clean --logs'
2021-09-09 16:40:46 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-09-09 16:40:46 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'sudo cloud-init clean --logs'
2021-09-09 16:40:47 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-09-09 16:44:51 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:44:53 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:44:54 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:44:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:44:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:44:56 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:44:57 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:44:58 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Created new image: ami-08c4b9461c8e92d12
2021-09-09 16:45:03 INFO      integration_testing:instances.py:114 Created new image: ami-08c4b9461c8e92d12
Done with environment setup
2021-09-09 16:45:48 INFO      integration_testing:conftest.py:162 Done with environment setup
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 16:45:48 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 16:46:20 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:46:24 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:46:26 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:46:27 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:46:28 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:46:28 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:46:28 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:46:30 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-019cab6134dd3ba49'))
2021-09-09 16:46:34 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-019cab6134dd3ba49'))
2021-09-09 16:46:34 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:46:34 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:46:34 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 16:46:34 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 16:46:34 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /var/log/cloud-init-output.log'
2021-09-09 16:46:34 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c %a:%U:%G /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/test_upgrade.py::test_clean_boot_of_upgraded_package Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 16:47:05 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 16:47:05 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08853a6c93b952e8b
user_data=#cloud-config
hostname: SRU-worked

2021-09-09 16:47:05 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08853a6c93b952e8b
user_data=#cloud-config
hostname: SRU-worked

2021-09-09 16:47:52 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:47:53 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:47:54 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:47:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:47:55 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:47:55 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:47:58 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0dabe4a3a704f86b7'))
2021-09-09 16:48:09 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0dabe4a3a704f86b7'))
2021-09-09 16:48:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.2-3-g899bfaa9-0ubuntu2~18.04.1
2021-09-09 16:48:10 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.2-3-g899bfaa9-0ubuntu2~18.04.1
2021-09-09 16:48:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 16:48:10 INFO      integration_testing:clouds.py:183 image serial: 20210907
2021-09-09 16:48:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c hostname
2021-09-09 16:48:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c cloud-id
2021-09-09 16:48:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /run/cloud-init/result.json'
2021-09-09 16:48:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/netplan/50-cloud-init.yaml'
2021-09-09 16:48:11 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c systemd-analyze
2021-09-09 16:48:11 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'systemd-analyze blame'
2021-09-09 16:48:11 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init analyze show'
2021-09-09 16:48:11 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init analyze blame'
2021-09-09 16:48:12 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
Installing proposed image
2021-09-09 16:48:12 INFO      integration_testing:instances.py:150 Installing proposed image
2021-09-09 16:48:12 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'echo deb "http://archive.ubuntu.com/ubuntu $(lsb_release -sc)-proposed main" >> /etc/apt/sources.list.d/proposed.list'
2021-09-09 16:48:12 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-get update -q'
2021-09-09 16:48:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-get install -qy cloud-init'
2021-09-09 16:48:28 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init -v'
Installed cloud-init version: 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:48:29 INFO      integration_testing:instances.py:137 Installed cloud-init version: 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:48:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'sudo cloud-init clean --logs'
2021-09-09 16:48:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'sudo rm -rf /var/log/syslog'
2021-09-09 16:48:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'hostname something-else'
Restarting instance and waiting for boot
2021-09-09 16:48:30 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 16:48:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 16:48:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 16:48:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:48:36 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:48:38 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:48:39 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:48:40 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:49:41 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:49:41 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:49:41 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:49:42 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 16:49:43 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 16:49:43 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init status --wait --long'
2021-09-09 16:49:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init init'
2021-09-09 16:49:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c hostname
2021-09-09 16:49:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c cloud-id
2021-09-09 16:49:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /run/cloud-init/result.json'
2021-09-09 16:49:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/netplan/50-cloud-init.yaml'
2021-09-09 16:49:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c systemd-analyze
2021-09-09 16:49:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'systemd-analyze blame'
2021-09-09 16:49:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init analyze show'
2021-09-09 16:49:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init analyze blame'
2021-09-09 16:49:47 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'

=== `systemd-analyze` before:
Startup finished in 4.999s (kernel) + 22.082s (userspace) = 27.081s
graphical.target reached after 20.843s in userspace
=== `systemd-analyze` after:
Startup finished in 5.813s (kernel) + 12.206s (userspace) = 18.019s
graphical.target reached after 11.289s in userspace

=== `systemd-analyze blame` before (first 10 lines):
         11.566s snapd.seeded.service
          2.171s dev-xvda1.device
          1.883s systemd-networkd-wait-online.service
          1.876s apparmor.service
          1.269s cloud-init-local.service
          1.214s cloud-final.service
          1.188s pollinate.service
          1.156s cloud-init.service
          1.030s cloud-config.service
           837ms snapd.service
=== `systemd-analyze blame` after (first 10 lines):
          3.043s dev-xvda1.device
          2.457s cloud-init-local.service
          2.224s snapd.service
          1.878s cloud-config.service
          1.337s systemd-networkd-wait-online.service
          1.196s cloud-init.service
           912ms cloud-final.service
           866ms networkd-dispatcher.service
           853ms dev-loop2.device
           780ms dev-loop0.device

=== `cloud-init analyze show` before:')
Finished stage: (init-local) 00.48600 seconds
Finished stage: (init-network) 00.59600 seconds
Finished stage: (modules-config) 00.38100 seconds
Finished stage: (modules-final) 00.16200 seconds
Total Time: 1.62500 seconds
=== `cloud-init analyze show` after:')
Finished stage: (init-local) 01.24600 seconds
Finished stage: (init-network) 00.61100 seconds
Finished stage: (modules-config) 01.05000 seconds
Finished stage: (modules-final) 00.17700 seconds
Total Time: 3.08400 seconds
Finished stage: (init-network) 00.18500 seconds
Total Time: 0.18500 seconds

=== `cloud-init analyze blame` before (first 10 lines): ')
-- Boot Record 01 --
     00.26900s (init-local/search-Ec2Local)
     00.21200s (modules-config/config-grub-dpkg)
     00.13700s (init-network/config-resizefs)
     00.12600s (modules-config/config-apt-configure)
     00.11900s (init-network/config-ssh)
     00.08600s (init-network/config-growpart)
     00.07500s (modules-final/config-keys-to-console)
     00.06900s (init-network/config-users-groups)
     00.03500s (modules-final/config-ssh-authkey-fingerprints)
=== `cloud-init analyze blame` after (first 10 lines): ')
-- Boot Record 01 --
     01.01800s (init-local/search-Ec2Local)
     00.67100s (modules-config/config-grub-dpkg)
     00.30400s (modules-config/config-apt-configure)
     00.19600s (init-network/config-ssh)
     00.11300s (init-network/config-growpart)
     00.09400s (modules-final/config-keys-to-console)
     00.04800s (init-network/config-resizefs)
     00.03000s (modules-final/config-ssh-authkey-fingerprints)
     00.02800s (init-network/config-users-groups)

2021-09-09 16:49:47 INFO      integration_testing.test_upgrade:test_upgrade.py:149 
=== `systemd-analyze` before:
Startup finished in 4.999s (kernel) + 22.082s (userspace) = 27.081s
graphical.target reached after 20.843s in userspace
=== `systemd-analyze` after:
Startup finished in 5.813s (kernel) + 12.206s (userspace) = 18.019s
graphical.target reached after 11.289s in userspace

=== `systemd-analyze blame` before (first 10 lines):
         11.566s snapd.seeded.service
          2.171s dev-xvda1.device
          1.883s systemd-networkd-wait-online.service
          1.876s apparmor.service
          1.269s cloud-init-local.service
          1.214s cloud-final.service
          1.188s pollinate.service
          1.156s cloud-init.service
          1.030s cloud-config.service
           837ms snapd.service
=== `systemd-analyze blame` after (first 10 lines):
          3.043s dev-xvda1.device
          2.457s cloud-init-local.service
          2.224s snapd.service
          1.878s cloud-config.service
          1.337s systemd-networkd-wait-online.service
          1.196s cloud-init.service
           912ms cloud-final.service
           866ms networkd-dispatcher.service
           853ms dev-loop2.device
           780ms dev-loop0.device

=== `cloud-init analyze show` before:')
Finished stage: (init-local) 00.48600 seconds
Finished stage: (init-network) 00.59600 seconds
Finished stage: (modules-config) 00.38100 seconds
Finished stage: (modules-final) 00.16200 seconds
Total Time: 1.62500 seconds
=== `cloud-init analyze show` after:')
Finished stage: (init-local) 01.24600 seconds
Finished stage: (init-network) 00.61100 seconds
Finished stage: (modules-config) 01.05000 seconds
Finished stage: (modules-final) 00.17700 seconds
Total Time: 3.08400 seconds
Finished stage: (init-network) 00.18500 seconds
Total Time: 0.18500 seconds

=== `cloud-init analyze blame` before (first 10 lines): ')
-- Boot Record 01 --
     00.26900s (init-local/search-Ec2Local)
     00.21200s (modules-config/config-grub-dpkg)
     00.13700s (init-network/config-resizefs)
     00.12600s (modules-config/config-apt-configure)
     00.11900s (init-network/config-ssh)
     00.08600s (init-network/config-growpart)
     00.07500s (modules-final/config-keys-to-console)
     00.06900s (init-network/config-users-groups)
     00.03500s (modules-final/config-ssh-authkey-fingerprints)
=== `cloud-init analyze blame` after (first 10 lines): ')
-- Boot Record 01 --
     01.01800s (init-local/search-Ec2Local)
     00.67100s (modules-config/config-grub-dpkg)
     00.30400s (modules-config/config-apt-configure)
     00.19600s (init-network/config-ssh)
     00.11300s (init-network/config-growpart)
     00.09400s (modules-final/config-keys-to-console)
     00.04800s (init-network/config-resizefs)
     00.03000s (modules-final/config-ssh-authkey-fingerprints)
     00.02800s (init-network/config-users-groups)

PASSED
tests/integration_tests/test_upgrade.py::test_subsequent_boot_of_upgraded_package Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 16:50:47 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08853a6c93b952e8b
user_data=None
-------------------------------- live log call ---------------------------------
2021-09-09 16:50:47 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08853a6c93b952e8b
user_data=None
2021-09-09 16:51:19 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:51:27 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:51:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:51:29 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:51:29 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:51:31 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-07ddc370960a0694c'))
2021-09-09 16:51:43 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-07ddc370960a0694c'))
2021-09-09 16:51:43 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.2-3-g899bfaa9-0ubuntu2~18.04.1
2021-09-09 16:51:44 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.2-3-g899bfaa9-0ubuntu2~18.04.1
2021-09-09 16:51:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 16:51:44 INFO      integration_testing:clouds.py:183 image serial: 20210907
Installing proposed image
2021-09-09 16:51:44 INFO      integration_testing:instances.py:150 Installing proposed image
2021-09-09 16:51:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'echo deb "http://archive.ubuntu.com/ubuntu $(lsb_release -sc)-proposed main" >> /etc/apt/sources.list.d/proposed.list'
2021-09-09 16:51:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-get update -q'
2021-09-09 16:51:53 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-get install -qy cloud-init'
2021-09-09 16:52:00 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init -v'
Installed cloud-init version: 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:52:01 INFO      integration_testing:instances.py:137 Installed cloud-init version: 21.3-1-g6803368d-0ubuntu1~18.04.2
Restarting instance and waiting for boot
2021-09-09 16:52:01 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 16:52:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 16:52:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 16:52:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:52:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:52:08 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:52:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:52:11 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:53:12 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:53:12 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:53:12 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:53:13 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 16:53:13 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 16:53:13 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init status --wait --long'
PASSED
tests/integration_tests/bugs/test_gh570.py::test_nocloud_seedfrom_vendordata SKIPPED
tests/integration_tests/bugs/test_gh626.py::test_wakeonlan SKIPPED
tests/integration_tests/bugs/test_gh632.py::test_datasource_rbx_no_stacktrace SKIPPED
tests/integration_tests/bugs/test_gh668.py::test_static_route_to_host SKIPPED
tests/integration_tests/bugs/test_gh671.py::test_update_default_password SKIPPED
tests/integration_tests/bugs/test_gh868.py::test_chef_license Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 16:54:00 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
chef:
  install_type: omnibus
  chef_license: accept
  server_url: https://chef.yourorg.invalid
  validation_name: some-validator

2021-09-09 16:54:00 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
chef:
  install_type: omnibus
  chef_license: accept
  server_url: https://chef.yourorg.invalid
  validation_name: some-validator

2021-09-09 16:55:17 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:55:17 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:55:17 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:55:18 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0ccf95dec3f919a2e'))
2021-09-09 16:55:19 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0ccf95dec3f919a2e'))
2021-09-09 16:55:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:55:19 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:55:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 16:55:19 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 16:55:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED
tests/integration_tests/bugs/test_lp1813396.py::test_gpg_no_tty Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 16:56:05 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  sources:
    cloudinit:
      source: 'deb [arch=amd64] http://ppa.launchpad.net/cloud-init-dev/daily/ubuntu focal main'
      keyserver: keyserver.ubuntu.com
      keyid: E4D304DF

2021-09-09 16:56:05 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  sources:
    cloudinit:
      source: 'deb [arch=amd64] http://ppa.launchpad.net/cloud-init-dev/daily/ubuntu focal main'
      keyserver: keyserver.ubuntu.com
      keyid: E4D304DF

2021-09-09 16:56:52 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:56:52 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:56:52 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:56:54 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0ebb4b47b3a79db77'))
2021-09-09 16:57:06 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0ebb4b47b3a79db77'))
2021-09-09 16:57:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:57:07 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:57:07 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 16:57:07 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 16:57:07 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED
tests/integration_tests/bugs/test_lp1835584.py::test_azure_kernel_upgrade_case_insensitive_uuid SKIPPED
tests/integration_tests/bugs/test_lp1886531.py::TestLp1886531::test_lp1886531 Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 16:57:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
- rm -f /etc/fstab

2021-09-09 16:57:38 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
- rm -f /etc/fstab

2021-09-09 16:58:24 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:58:26 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:58:27 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:58:27 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:58:27 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:58:28 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0c39f42e8ce52f118'))
2021-09-09 16:58:33 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0c39f42e8ce52f118'))
2021-09-09 16:58:33 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:58:33 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 16:58:33 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 16:58:33 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 16:58:33 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED
tests/integration_tests/bugs/test_lp1897099.py::test_fallocate_fallback Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 16:59:21 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
  - echo 'whoops' > /usr/bin/fallocate
swap:
  filename: /swap.img
  size: 10000000
  maxsize: 10000000

2021-09-09 16:59:21 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
  - echo 'whoops' > /usr/bin/fallocate
swap:
  filename: /swap.img
  size: 10000000
  maxsize: 10000000

2021-09-09 16:59:53 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:59:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:59:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:59:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 16:59:58 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 16:59:58 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 16:59:59 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0ec7e9268172dbf44'))
2021-09-09 17:00:04 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0ec7e9268172dbf44'))
2021-09-09 17:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:00:04 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:00:04 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
2021-09-09 17:00:05 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /proc/swaps'
2021-09-09 17:00:05 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/fstab'
PASSED
tests/integration_tests/bugs/test_lp1898997.py::TestInterfaceListingWithOpenvSwitch::test_ovs_member_interfaces_not_excluded SKIPPED
tests/integration_tests/bugs/test_lp1900837.py::TestLogPermissionsNotResetOnReboot::test_permissions_unchanged Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:00:35 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 17:00:35 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 17:01:22 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:01:38 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:01:38 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:01:40 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-09db4aae32b7821c5'))
2021-09-09 17:01:42 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-09db4aae32b7821c5'))
2021-09-09 17:01:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:01:42 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:01:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:01:42 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:01:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c %a /var/log/cloud-init.log'
2021-09-09 17:01:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'chmod 600 /var/log/cloud-init.log'
2021-09-09 17:01:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c %a /var/log/cloud-init.log'
Restarting instance and waiting for boot
2021-09-09 17:01:42 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 17:01:42 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 17:01:48 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 17:01:48 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:01:49 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:01:50 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:01:51 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:01:52 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:01:54 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:01:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:02:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:02:56 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:02:56 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:02:57 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 17:02:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 17:02:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init status'
2021-09-09 17:02:59 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c %a /var/log/cloud-init.log'
PASSED
tests/integration_tests/bugs/test_lp1901011.py::test_ephemeral[Standard_DS1_v2-True] SKIPPED
tests/integration_tests/bugs/test_lp1901011.py::test_ephemeral[Standard_D2s_v4-False] SKIPPED
tests/integration_tests/bugs/test_lp1910835.py::test_crlf_in_azure_metadata_ssh_keys SKIPPED
tests/integration_tests/bugs/test_lp1912844.py::test_get_interfaces_by_mac_doesnt_traceback SKIPPED
tests/integration_tests/modules/test_apt.py::TestApt::test_sources_list Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:04:30 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  conf: |
    APT {
        Get {
            Assume-Yes "true";
            Fix-Broken "true";
        }
    }
  proxy: "http://proxy.internal:3128"
  http_proxy: "http://squid.internal:3128"
  ftp_proxy: "ftp://squid.internal:3128"
  https_proxy: "https://squid.internal:3128"
  primary:
    - arches: [default]
      uri: http://badarchive.ubuntu.com/ubuntu
  security:
    - arches: [default]
      uri: http://badsecurity.ubuntu.com/ubuntu
  sources_list: |
    deb $MIRROR $RELEASE main restricted
    deb-src $MIRROR $RELEASE main restricted
    deb $PRIMARY $RELEASE universe restricted
    deb-src $PRIMARY $RELEASE universe restricted
    deb $SECURITY $RELEASE-security multiverse
    deb-src $SECURITY $RELEASE-security multiverse
  sources:
    test_keyserver:
        keyid: 72600DB15B8E4C8B1964B868038ACC97C660A937
        keyserver: keyserver.ubuntu.com
        source: "deb http://ppa.launchpad.net/cloud-init-raharper/curtin-dev/ubuntu $RELEASE main"
    test_ppa:
      keyid: 441614D8
      keyserver: keyserver.ubuntu.com
      source: "ppa:simplestreams-dev/trunk"
    test_key:
      source: "deb http://ppa.launchpad.net/cloud-init-dev/test-archive/ubuntu $RELEASE main"
      key: |
        -----BEGIN PGP PUBLIC KEY BLOCK-----
        Version: SKS 1.1.6
        Comment: Hostname: keyserver.ubuntu.com

        mQINBFbZRUIBEAC+A0PIKYBP9kLC4hQtRrffRS11uLo8/BdtmOdrlW0hpPHzCfKnjR3tvSEI
        lqPHG1QrrjAXKZDnZMRz+h/px7lUztvytGzHPSJd5ARUzAyjyRezUhoJ3VSCxrPqx62avuWf
        RfoJaIeHfDehL5/dTVkyiWxfVZ369ZX6JN2AgLsQTeybTQ75+2z0xPrrhnGmgh6g0qTYcAaq
        M5ONOGiqeSBX/Smjh6ALy5XkhUiFGLsI7Yluf6XSICY/x7gd6RAfgSIQrUTNMoS1sqhT4aot
        +xvOfQy8ySkfAK4NddXql6E/+ZqTmBY/Lr0YklFBy8jGT+UysfiIznPMIwbmgq5Li7BtDDtX
        b8Uyi4edPpjtextezfXYn4NVIpPL5dPZS/FXh4HpzyH0pYCfrH4QDGA7i52AGmhpiOFjJMo6
        N33sdjZHOH/2Vyp+QZaQnsdUAi1N4M6c33tQbpIScn1SY+El8z5JDA4PBzkw8HpLCi1gGoa6
        V4kfbWqXXbGAJFkLkP/vc4+pY9axOlmCkJg7xCPwhI75y1cONgovhz+BEXOzolh5KZuGbGbj
        xe0wva5DLBeIg7EQFf+99pOS7Syby3Xpm6ZbswEFV0cllK4jf/QMjtfInxobuMoI0GV0bE5l
        WlRtPCK5FnbHwxi0wPNzB/5fwzJ77r6HgPrR0OkT0lWmbUyoOQARAQABtC1MYXVuY2hwYWQg
        UFBBIGZvciBjbG91ZCBpbml0IGRldmVsb3BtZW50IHRlYW2JAjgEEwECACIFAlbZRUICGwMG
        CwkIBwMCBhUIAgkKCwQWAgMBAh4BAheAAAoJEAg9Bvvk0wTfHfcP/REK5N2s1JYc69qEa9ZN
        o6oi+A7l6AYw+ZY88O5TJe7F9otv5VXCIKSUT0Vsepjgf0mtXAgf/sb2lsJn/jp7tzgov3YH
        vSrkTkRydz8xcA87gwQKePuvTLxQpftF4flrBxgSueIn5O/tPrBOxLz7EVYBc78SKg9aj9L2
        yUp+YuNevlwfZCTYeBb9r3FHaab2HcgkwqYch66+nKYfwiLuQ9NzXXm0Wn0JcEQ6pWvJscbj
        C9BdawWovfvMK5/YLfI6Btm7F4mIpQBdhSOUp/YXKmdvHpmwxMCN2QhqYK49SM7qE9aUDbJL
        arppSEBtlCLWhRBZYLTUna+BkuQ1bHz4St++XTR49Qd7vDERALpApDjB2dxPfMiBzCMwQQyq
        uy13exU8o2ETLg+dZSLfDTzrBNsBFmXlw8WW17nTISYdKeGKL+QdlUjpzdwUMMzHhAO8SmMH
        zjeSlDSRMXBJFAFSbCl7EwmMKa3yVX0zInT91fNllZ3iatAmtVdqVH/BFQfTIMH2ET7A8WzJ
        ZzVSuMRhqoKdr5AMcHuJGPUoVkVJHQA+NNvEiXSysF3faL7jmKapmUwrhpYYX2H8pf+VMu2e
        cLflKTI28dl+ZQ4Pl/aVsxrti/pzhdYy05Sn5ddtySyIkvo8L1cU5MWpbvSlFPkTstBUDLBf
        pb0uBy+g0oxJQg15
        =uy53
        -----END PGP PUBLIC KEY BLOCK-----
apt_pipelining: os

2021-09-09 17:04:30 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  conf: |
    APT {
        Get {
            Assume-Yes "true";
            Fix-Broken "true";
        }
    }
  proxy: "http://proxy.internal:3128"
  http_proxy: "http://squid.internal:3128"
  ftp_proxy: "ftp://squid.internal:3128"
  https_proxy: "https://squid.internal:3128"
  primary:
    - arches: [default]
      uri: http://badarchive.ubuntu.com/ubuntu
  security:
    - arches: [default]
      uri: http://badsecurity.ubuntu.com/ubuntu
  sources_list: |
    deb $MIRROR $RELEASE main restricted
    deb-src $MIRROR $RELEASE main restricted
    deb $PRIMARY $RELEASE universe restricted
    deb-src $PRIMARY $RELEASE universe restricted
    deb $SECURITY $RELEASE-security multiverse
    deb-src $SECURITY $RELEASE-security multiverse
  sources:
    test_keyserver:
        keyid: 72600DB15B8E4C8B1964B868038ACC97C660A937
        keyserver: keyserver.ubuntu.com
        source: "deb http://ppa.launchpad.net/cloud-init-raharper/curtin-dev/ubuntu $RELEASE main"
    test_ppa:
      keyid: 441614D8
      keyserver: keyserver.ubuntu.com
      source: "ppa:simplestreams-dev/trunk"
    test_key:
      source: "deb http://ppa.launchpad.net/cloud-init-dev/test-archive/ubuntu $RELEASE main"
      key: |
        -----BEGIN PGP PUBLIC KEY BLOCK-----
        Version: SKS 1.1.6
        Comment: Hostname: keyserver.ubuntu.com

        mQINBFbZRUIBEAC+A0PIKYBP9kLC4hQtRrffRS11uLo8/BdtmOdrlW0hpPHzCfKnjR3tvSEI
        lqPHG1QrrjAXKZDnZMRz+h/px7lUztvytGzHPSJd5ARUzAyjyRezUhoJ3VSCxrPqx62avuWf
        RfoJaIeHfDehL5/dTVkyiWxfVZ369ZX6JN2AgLsQTeybTQ75+2z0xPrrhnGmgh6g0qTYcAaq
        M5ONOGiqeSBX/Smjh6ALy5XkhUiFGLsI7Yluf6XSICY/x7gd6RAfgSIQrUTNMoS1sqhT4aot
        +xvOfQy8ySkfAK4NddXql6E/+ZqTmBY/Lr0YklFBy8jGT+UysfiIznPMIwbmgq5Li7BtDDtX
        b8Uyi4edPpjtextezfXYn4NVIpPL5dPZS/FXh4HpzyH0pYCfrH4QDGA7i52AGmhpiOFjJMo6
        N33sdjZHOH/2Vyp+QZaQnsdUAi1N4M6c33tQbpIScn1SY+El8z5JDA4PBzkw8HpLCi1gGoa6
        V4kfbWqXXbGAJFkLkP/vc4+pY9axOlmCkJg7xCPwhI75y1cONgovhz+BEXOzolh5KZuGbGbj
        xe0wva5DLBeIg7EQFf+99pOS7Syby3Xpm6ZbswEFV0cllK4jf/QMjtfInxobuMoI0GV0bE5l
        WlRtPCK5FnbHwxi0wPNzB/5fwzJ77r6HgPrR0OkT0lWmbUyoOQARAQABtC1MYXVuY2hwYWQg
        UFBBIGZvciBjbG91ZCBpbml0IGRldmVsb3BtZW50IHRlYW2JAjgEEwECACIFAlbZRUICGwMG
        CwkIBwMCBhUIAgkKCwQWAgMBAh4BAheAAAoJEAg9Bvvk0wTfHfcP/REK5N2s1JYc69qEa9ZN
        o6oi+A7l6AYw+ZY88O5TJe7F9otv5VXCIKSUT0Vsepjgf0mtXAgf/sb2lsJn/jp7tzgov3YH
        vSrkTkRydz8xcA87gwQKePuvTLxQpftF4flrBxgSueIn5O/tPrBOxLz7EVYBc78SKg9aj9L2
        yUp+YuNevlwfZCTYeBb9r3FHaab2HcgkwqYch66+nKYfwiLuQ9NzXXm0Wn0JcEQ6pWvJscbj
        C9BdawWovfvMK5/YLfI6Btm7F4mIpQBdhSOUp/YXKmdvHpmwxMCN2QhqYK49SM7qE9aUDbJL
        arppSEBtlCLWhRBZYLTUna+BkuQ1bHz4St++XTR49Qd7vDERALpApDjB2dxPfMiBzCMwQQyq
        uy13exU8o2ETLg+dZSLfDTzrBNsBFmXlw8WW17nTISYdKeGKL+QdlUjpzdwUMMzHhAO8SmMH
        zjeSlDSRMXBJFAFSbCl7EwmMKa3yVX0zInT91fNllZ3iatAmtVdqVH/BFQfTIMH2ET7A8WzJ
        ZzVSuMRhqoKdr5AMcHuJGPUoVkVJHQA+NNvEiXSysF3faL7jmKapmUwrhpYYX2H8pf+VMu2e
        cLflKTI28dl+ZQ4Pl/aVsxrti/pzhdYy05Sn5ddtySyIkvo8L1cU5MWpbvSlFPkTstBUDLBf
        pb0uBy+g0oxJQg15
        =uy53
        -----END PGP PUBLIC KEY BLOCK-----
apt_pipelining: os

2021-09-09 17:05:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:05:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:05:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:05:08 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:05:08 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:05:08 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:05:10 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-027cfd9fd6fe50e84'))
2021-09-09 17:05:18 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-027cfd9fd6fe50e84'))
2021-09-09 17:05:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:05:19 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:05:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:05:19 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:05:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/sources.list'
PASSED
tests/integration_tests/modules/test_apt.py::TestApt::test_apt_conf Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:05:19 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:05:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/apt.conf.d/94cloud-init-config'
PASSED
tests/integration_tests/modules/test_apt.py::TestApt::test_apt_proxy Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:05:19 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:05:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/apt.conf.d/90cloud-init-aptproxy'
PASSED
tests/integration_tests/modules/test_apt.py::TestApt::test_ppa_source Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:05:19 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:05:19 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 17:05:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/sources.list.d/simplestreams-dev-ubuntu-trunk-bionic.list'
2021-09-09 17:05:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-key finger'
PASSED
tests/integration_tests/modules/test_apt.py::TestApt::test_key Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:05:19 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:05:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/sources.list.d/test_key.list'
2021-09-09 17:05:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-key finger'
PASSED
tests/integration_tests/modules/test_apt.py::TestApt::test_keyserver Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:05:20 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:05:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/sources.list.d/test_keyserver.list'
2021-09-09 17:05:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'apt-key finger'
PASSED
tests/integration_tests/modules/test_apt.py::TestApt::test_os_pipelining Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:05:20 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:05:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /etc/apt/apt.conf.d/90cloud-init-pipelining'
PASSED
tests/integration_tests/modules/test_apt.py::TestDefaults::test_primary_on_openstack SKIPPED
tests/integration_tests/modules/test_apt.py::TestDefaults::test_security Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:05:51 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  primary:
    - arches:
      - default
      
  security:
    - arches:
      - default

2021-09-09 17:05:51 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  primary:
    - arches:
      - default
      
  security:
    - arches:
      - default

2021-09-09 17:06:22 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:06:31 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:06:31 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:06:31 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:06:33 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0b60ee30c5bf91655'))
2021-09-09 17:06:38 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0b60ee30c5bf91655'))
2021-09-09 17:06:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:06:38 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:06:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:06:38 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:06:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/sources.list'
PASSED
tests/integration_tests/modules/test_apt.py::test_default_primary_with_uri Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:07:24 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  primary:
    - arches:
      - default
      uri: "http://something.random.invalid/ubuntu"
  security:
    - arches:
      - default

2021-09-09 17:07:24 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  primary:
    - arches:
      - default
      uri: "http://something.random.invalid/ubuntu"
  security:
    - arches:
      - default

2021-09-09 17:07:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:07:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:07:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:07:58 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:07:58 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:08:00 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e238f176b76289f4'))
2021-09-09 17:08:04 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e238f176b76289f4'))
2021-09-09 17:08:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:08:04 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:08:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:08:04 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:08:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/sources.list'
PASSED
tests/integration_tests/modules/test_apt.py::TestDisabled::test_disable_suites Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:08:50 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  disable_suites:
  - $RELEASE
  - $RELEASE-updates
  - $RELEASE-backports
  - $RELEASE-security
apt_pipelining: false

2021-09-09 17:08:50 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  disable_suites:
  - $RELEASE
  - $RELEASE-updates
  - $RELEASE-backports
  - $RELEASE-security
apt_pipelining: false

2021-09-09 17:09:22 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:09:26 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:09:27 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:09:28 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:09:29 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:09:29 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:09:30 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0a6c769d692cbf3d8'))
2021-09-09 17:09:35 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0a6c769d692cbf3d8'))
2021-09-09 17:09:35 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:09:35 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:09:35 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:09:35 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:09:35 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/sources.list | grep -v '"'"'^#'"'"''
PASSED
tests/integration_tests/modules/test_apt.py::TestDisabled::test_disable_apt_pipelining Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:09:35 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:09:35 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/apt/apt.conf.d/90cloud-init-pipelining'
PASSED
tests/integration_tests/modules/test_ca_certs.py::TestCaCerts::test_certs_updated Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:10:06 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ca-certs:
  remove-defaults: true
  trusted:
    - |
      -----BEGIN CERTIFICATE-----
      MIIGJzCCBA+gAwIBAgIBATANBgkqhkiG9w0BAQUFADCBsjELMAkGA1UEBhMCRlIx
      DzANBgNVBAgMBkFsc2FjZTETMBEGA1UEBwwKU3RyYXNib3VyZzEYMBYGA1UECgwP
      d3d3LmZyZWVsYW4ub3JnMRAwDgYDVQQLDAdmcmVlbGFuMS0wKwYDVQQDDCRGcmVl
      bGFuIFNhbXBsZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkxIjAgBgkqhkiG9w0BCQEW
      E2NvbnRhY3RAZnJlZWxhbi5vcmcwHhcNMTIwNDI3MTAzMTE4WhcNMjIwNDI1MTAz
      MTE4WjB+MQswCQYDVQQGEwJGUjEPMA0GA1UECAwGQWxzYWNlMRgwFgYDVQQKDA93
      d3cuZnJlZWxhbi5vcmcxEDAOBgNVBAsMB2ZyZWVsYW4xDjAMBgNVBAMMBWFsaWNl
      MSIwIAYJKoZIhvcNAQkBFhNjb250YWN0QGZyZWVsYW4ub3JnMIICIjANBgkqhkiG
      9w0BAQEFAAOCAg8AMIICCgKCAgEA3W29+ID6194bH6ejLrIC4hb2Ugo8v6ZC+Mrc
      k2dNYMNPjcOKABvxxEtBamnSaeU/IY7FC/giN622LEtV/3oDcrua0+yWuVafyxmZ
      yTKUb4/GUgafRQPf/eiX9urWurtIK7XgNGFNUjYPq4dSJQPPhwCHE/LKAykWnZBX
      RrX0Dq4XyApNku0IpjIjEXH+8ixE12wH8wt7DEvdO7T3N3CfUbaITl1qBX+Nm2Z6
      q4Ag/u5rl8NJfXg71ZmXA3XOj7zFvpyapRIZcPmkvZYn7SMCp8dXyXHPdpSiIWL2
      uB3KiO4JrUYvt2GzLBUThp+lNSZaZ/Q3yOaAAUkOx+1h08285Pi+P8lO+H2Xic4S
      vMq1xtLg2bNoPC5KnbRfuFPuUD2/3dSiiragJ6uYDLOyWJDivKGt/72OVTEPAL9o
      6T2pGZrwbQuiFGrGTMZOvWMSpQtNl+tCCXlT4mWqJDRwuMGrI4DnnGzt3IKqNwS4
      Qyo9KqjMIPwnXZAmWPm3FOKe4sFwc5fpawKO01JZewDsYTDxVj+cwXwFxbE2yBiF
      z2FAHwfopwaH35p3C6lkcgP2k/zgAlnBluzACUI+MKJ/G0gv/uAhj1OHJQ3L6kn1
      SpvQ41/ueBjlunExqQSYD7GtZ1Kg8uOcq2r+WISE3Qc9MpQFFkUVllmgWGwYDuN3
      Zsez95kCAwEAAaN7MHkwCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdT3BlblNT
      TCBHZW5lcmF0ZWQgQ2VydGlmaWNhdGUwHQYDVR0OBBYEFFlfyRO6G8y5qEFKikl5
      ajb2fT7XMB8GA1UdIwQYMBaAFCNsLT0+KV14uGw+quK7Lh5sh/JTMA0GCSqGSIb3
      DQEBBQUAA4ICAQAT5wJFPqervbja5+90iKxi1d0QVtVGB+z6aoAMuWK+qgi0vgvr
      mu9ot2lvTSCSnRhjeiP0SIdqFMORmBtOCFk/kYDp9M/91b+vS+S9eAlxrNCB5VOf
      PqxEPp/wv1rBcE4GBO/c6HcFon3F+oBYCsUQbZDKSSZxhDm3mj7pb67FNbZbJIzJ
      70HDsRe2O04oiTx+h6g6pW3cOQMgIAvFgKN5Ex727K4230B0NIdGkzuj4KSML0NM
      slSAcXZ41OoSKNjy44BVEZv0ZdxTDrRM4EwJtNyggFzmtTuV02nkUj1bYYYC5f0L
      ADr6s0XMyaNk8twlWYlYDZ5uKDpVRVBfiGcq0uJIzIvemhuTrofh8pBQQNkPRDFT
      Rq1iTo1Ihhl3/Fl1kXk1WR3jTjNb4jHX7lIoXwpwp767HAPKGhjQ9cFbnHMEtkro
      RlJYdtRq5mccDtwT0GFyoJLLBZdHHMHJz0F9H7FNk2tTQQMhK5MVYwg+LIaee586
      CQVqfbscp7evlgjLW98H+5zylRHAgoH2G79aHljNKMp9BOuq6SnEglEsiWGVtu2l
      hnx8SB3sVJZHeer8f/UQQwqbAO+Kdy70NmbSaqaVtp8jOxLiidWkwSyRTsuU6D8i
      DiH5uEqBXExjrj0FslxcVKdVj5glVcSmkLwZKbEU1OKwleT/iXFhvooWhQ==
      -----END CERTIFICATE-----

2021-09-09 17:10:06 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ca-certs:
  remove-defaults: true
  trusted:
    - |
      -----BEGIN CERTIFICATE-----
      MIIGJzCCBA+gAwIBAgIBATANBgkqhkiG9w0BAQUFADCBsjELMAkGA1UEBhMCRlIx
      DzANBgNVBAgMBkFsc2FjZTETMBEGA1UEBwwKU3RyYXNib3VyZzEYMBYGA1UECgwP
      d3d3LmZyZWVsYW4ub3JnMRAwDgYDVQQLDAdmcmVlbGFuMS0wKwYDVQQDDCRGcmVl
      bGFuIFNhbXBsZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkxIjAgBgkqhkiG9w0BCQEW
      E2NvbnRhY3RAZnJlZWxhbi5vcmcwHhcNMTIwNDI3MTAzMTE4WhcNMjIwNDI1MTAz
      MTE4WjB+MQswCQYDVQQGEwJGUjEPMA0GA1UECAwGQWxzYWNlMRgwFgYDVQQKDA93
      d3cuZnJlZWxhbi5vcmcxEDAOBgNVBAsMB2ZyZWVsYW4xDjAMBgNVBAMMBWFsaWNl
      MSIwIAYJKoZIhvcNAQkBFhNjb250YWN0QGZyZWVsYW4ub3JnMIICIjANBgkqhkiG
      9w0BAQEFAAOCAg8AMIICCgKCAgEA3W29+ID6194bH6ejLrIC4hb2Ugo8v6ZC+Mrc
      k2dNYMNPjcOKABvxxEtBamnSaeU/IY7FC/giN622LEtV/3oDcrua0+yWuVafyxmZ
      yTKUb4/GUgafRQPf/eiX9urWurtIK7XgNGFNUjYPq4dSJQPPhwCHE/LKAykWnZBX
      RrX0Dq4XyApNku0IpjIjEXH+8ixE12wH8wt7DEvdO7T3N3CfUbaITl1qBX+Nm2Z6
      q4Ag/u5rl8NJfXg71ZmXA3XOj7zFvpyapRIZcPmkvZYn7SMCp8dXyXHPdpSiIWL2
      uB3KiO4JrUYvt2GzLBUThp+lNSZaZ/Q3yOaAAUkOx+1h08285Pi+P8lO+H2Xic4S
      vMq1xtLg2bNoPC5KnbRfuFPuUD2/3dSiiragJ6uYDLOyWJDivKGt/72OVTEPAL9o
      6T2pGZrwbQuiFGrGTMZOvWMSpQtNl+tCCXlT4mWqJDRwuMGrI4DnnGzt3IKqNwS4
      Qyo9KqjMIPwnXZAmWPm3FOKe4sFwc5fpawKO01JZewDsYTDxVj+cwXwFxbE2yBiF
      z2FAHwfopwaH35p3C6lkcgP2k/zgAlnBluzACUI+MKJ/G0gv/uAhj1OHJQ3L6kn1
      SpvQ41/ueBjlunExqQSYD7GtZ1Kg8uOcq2r+WISE3Qc9MpQFFkUVllmgWGwYDuN3
      Zsez95kCAwEAAaN7MHkwCQYDVR0TBAIwADAsBglghkgBhvhCAQ0EHxYdT3BlblNT
      TCBHZW5lcmF0ZWQgQ2VydGlmaWNhdGUwHQYDVR0OBBYEFFlfyRO6G8y5qEFKikl5
      ajb2fT7XMB8GA1UdIwQYMBaAFCNsLT0+KV14uGw+quK7Lh5sh/JTMA0GCSqGSIb3
      DQEBBQUAA4ICAQAT5wJFPqervbja5+90iKxi1d0QVtVGB+z6aoAMuWK+qgi0vgvr
      mu9ot2lvTSCSnRhjeiP0SIdqFMORmBtOCFk/kYDp9M/91b+vS+S9eAlxrNCB5VOf
      PqxEPp/wv1rBcE4GBO/c6HcFon3F+oBYCsUQbZDKSSZxhDm3mj7pb67FNbZbJIzJ
      70HDsRe2O04oiTx+h6g6pW3cOQMgIAvFgKN5Ex727K4230B0NIdGkzuj4KSML0NM
      slSAcXZ41OoSKNjy44BVEZv0ZdxTDrRM4EwJtNyggFzmtTuV02nkUj1bYYYC5f0L
      ADr6s0XMyaNk8twlWYlYDZ5uKDpVRVBfiGcq0uJIzIvemhuTrofh8pBQQNkPRDFT
      Rq1iTo1Ihhl3/Fl1kXk1WR3jTjNb4jHX7lIoXwpwp767HAPKGhjQ9cFbnHMEtkro
      RlJYdtRq5mccDtwT0GFyoJLLBZdHHMHJz0F9H7FNk2tTQQMhK5MVYwg+LIaee586
      CQVqfbscp7evlgjLW98H+5zylRHAgoH2G79aHljNKMp9BOuq6SnEglEsiWGVtu2l
      hnx8SB3sVJZHeer8f/UQQwqbAO+Kdy70NmbSaqaVtp8jOxLiidWkwSyRTsuU6D8i
      DiH5uEqBXExjrj0FslxcVKdVj5glVcSmkLwZKbEU1OKwleT/iXFhvooWhQ==
      -----END CERTIFICATE-----

2021-09-09 17:10:38 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:10:53 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:10:53 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:10:55 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0284079523b17042e'))
2021-09-09 17:10:57 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0284079523b17042e'))
2021-09-09 17:10:57 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:10:58 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:10:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:10:58 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:10:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- ls -1 /etc/ssl/certs
2021-09-09 17:10:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- readlink /etc/ssl/certs/a535c1f3.0
2021-09-09 17:10:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- readlink /etc/ssl/certs/ca-certificates.crt
2021-09-09 17:10:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- readlink /etc/ssl/certs/cloud-init-ca-certs.pem
PASSED
tests/integration_tests/modules/test_ca_certs.py::TestCaCerts::test_cert_installed Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:10:58 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:10:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'sha256sum /etc/ssl/certs/ca-certificates.crt'
PASSED
tests/integration_tests/modules/test_cli.py::test_valid_userdata Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:11:29 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
runcmd:
  - echo 'hi' > /var/tmp/test

2021-09-09 17:11:29 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
runcmd:
  - echo 'hi' > /var/tmp/test

2021-09-09 17:12:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:12:02 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:12:03 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:12:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:12:04 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:12:05 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:12:06 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0cadef564675e96f9'))
2021-09-09 17:12:10 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0cadef564675e96f9'))
2021-09-09 17:12:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:12:11 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:12:11 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:12:11 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:12:11 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init devel schema --system'
PASSED
tests/integration_tests/modules/test_cli.py::test_invalid_userdata Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:12:57 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=runcmd:
  - echo 'hi' > /var/tmp/test

2021-09-09 17:12:57 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=runcmd:
  - echo 'hi' > /var/tmp/test

2021-09-09 17:13:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:13:36 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:13:36 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:13:38 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-08818760efae049a6'))
2021-09-09 17:13:42 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-08818760efae049a6'))
2021-09-09 17:13:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:13:43 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:13:43 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:13:43 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:13:43 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init devel schema --system'
PASSED
tests/integration_tests/modules/test_combined.py::TestCombined::test_final_message Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:14:29 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  primary:
    - arches: [default]
      uri: http://us.archive.ubuntu.com/ubuntu/
byobu_by_default: enable
final_message: |
  This is my final message!
  $version
  $timestamp
  $datasource
  $uptime
locale: en_GB.UTF-8
locale_configfile: /etc/default/locale
ntp:
  servers: ['ntp.ubuntu.com']
runcmd:
  - echo 'hello world' > /var/tmp/runcmd_output

2021-09-09 17:14:29 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
apt:
  primary:
    - arches: [default]
      uri: http://us.archive.ubuntu.com/ubuntu/
byobu_by_default: enable
final_message: |
  This is my final message!
  $version
  $timestamp
  $datasource
  $uptime
locale: en_GB.UTF-8
locale_configfile: /etc/default/locale
ntp:
  servers: ['ntp.ubuntu.com']
runcmd:
  - echo 'hello world' > /var/tmp/runcmd_output

2021-09-09 17:15:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:15:09 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:15:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:15:12 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:15:12 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:15:12 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:15:14 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-07ca421c29444c346'))
2021-09-09 17:15:19 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-07ca421c29444c346'))
2021-09-09 17:15:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:15:20 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:15:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:15:20 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:15:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
2021-09-09 17:15:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'date "+%a, %d %b %Y"'
PASSED
tests/integration_tests/modules/test_combined.py::TestCombined::test_ntp_with_apt Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:15:20 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:15:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED
tests/integration_tests/modules/test_combined.py::TestCombined::test_byobu Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:15:20 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:15:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -e "/etc/byobu/autolaunch"'
PASSED
tests/integration_tests/modules/test_combined.py::TestCombined::test_configured_locale Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:15:20 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:15:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/default/locale'
2021-09-09 17:15:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'locale -a'
2021-09-09 17:15:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/locale.gen | grep -v '"'"'^#'"'"' | uniq'
PASSED
tests/integration_tests/modules/test_combined.py::TestCombined::test_runcmd Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:15:21 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:15:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/tmp/runcmd_output'
PASSED
tests/integration_tests/modules/test_combined.py::TestCombined::test_no_problems Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:15:21 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:15:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /run/cloud-init/status.json'
2021-09-09 17:15:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /run/cloud-init/result.json'
2021-09-09 17:15:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED
tests/integration_tests/modules/test_combined.py::TestCombined::test_instance_json_lxd SKIPPED
tests/integration_tests/modules/test_combined.py::TestCombined::test_instance_json_lxd_vm SKIPPED
tests/integration_tests/modules/test_combined.py::TestCombined::test_instance_json_ec2 Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:15:21 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:15:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /run/cloud-init/instance-data.json'
PASSED
tests/integration_tests/modules/test_command_output.py::test_runcmd Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:15:52 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
output: { all: "| tee -a /var/log/cloud-init-test-output" }
final_message: "should be last line in cloud-init-test-output file"

2021-09-09 17:15:52 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
output: { all: "| tee -a /var/log/cloud-init-test-output" }
final_message: "should be last line in cloud-init-test-output file"

2021-09-09 17:16:23 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:16:31 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:16:31 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:16:33 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e576ca5ad00fc8d3'))
2021-09-09 17:16:37 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e576ca5ad00fc8d3'))
2021-09-09 17:16:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:16:37 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:16:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:16:38 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:16:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init-test-output'
PASSED
tests/integration_tests/modules/test_disk_setup.py::TestDeviceAliases::test_device_alias SKIPPED
tests/integration_tests/modules/test_disk_setup.py::TestPartProbeAvailability::test_disk_setup_when_mounted SKIPPED
tests/integration_tests/modules/test_disk_setup.py::TestPartProbeAvailability::test_disk_setup_no_partprobe SKIPPED
tests/integration_tests/modules/test_hotplug.py::test_hotplug_add_remove SKIPPED
tests/integration_tests/modules/test_hotplug.py::test_no_hotplug_in_userdata SKIPPED
tests/integration_tests/modules/test_jinja_templating.py::test_runcmd_with_variable_substitution Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:17:08 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=## template: jinja
#cloud-config
runcmd:
  - echo {{v1.local_hostname}} > /var/tmp/runcmd_output
  - echo {{merged_cfg._doc}} >> /var/tmp/runcmd_output

2021-09-09 17:17:08 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=## template: jinja
#cloud-config
runcmd:
  - echo {{v1.local_hostname}} > /var/tmp/runcmd_output
  - echo {{merged_cfg._doc}} >> /var/tmp/runcmd_output

2021-09-09 17:17:40 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:17:41 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:17:42 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:17:42 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:17:43 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:17:44 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-024964564a701674c'))
2021-09-09 17:17:49 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-024964564a701674c'))
2021-09-09 17:17:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:17:49 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:17:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:17:49 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:17:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c hostname
2021-09-09 17:17:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/tmp/runcmd_output'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleBlacklist::test_excluded_keys[DSA] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:18:35 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_fp_console_blacklist: [ssh-dss, ssh-dsa, ecdsa-sha2-nistp256]
ssh_key_console_blacklist: [ssh-dss, ssh-dsa, ecdsa-sha2-nistp256]

2021-09-09 17:18:35 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_fp_console_blacklist: [ssh-dss, ssh-dsa, ecdsa-sha2-nistp256]
ssh_key_console_blacklist: [ssh-dss, ssh-dsa, ecdsa-sha2-nistp256]

2021-09-09 17:19:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:19:09 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:19:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:19:11 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:19:11 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:19:11 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:19:13 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0de8d7b7e6c19728f'))
2021-09-09 17:19:17 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0de8d7b7e6c19728f'))
2021-09-09 17:19:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:19:18 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:19:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:19:18 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:19:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleBlacklist::test_excluded_keys[ECDSA] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:19:18 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:19:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleBlacklist::test_included_keys[ED25519] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:19:18 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:19:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleBlacklist::test_included_keys[RSA] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:19:18 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:19:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestAllKeysToConsoleBlacklist::test_header_excluded Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:20:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_fp_console_blacklist: [ssh-dsa, ssh-ecdsa, ssh-ed25519, ssh-rsa, ssh-dss, ecdsa-sha2-nistp256]

2021-09-09 17:20:04 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_fp_console_blacklist: [ssh-dsa, ssh-ecdsa, ssh-ed25519, ssh-rsa, ssh-dss, ecdsa-sha2-nistp256]

2021-09-09 17:20:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:20:43 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:20:43 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:20:45 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0f1035c452b4fd230'))
2021-09-09 17:20:49 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0f1035c452b4fd230'))
2021-09-09 17:20:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:20:49 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:20:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:20:49 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:20:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestAllKeysToConsoleBlacklist::test_footer_excluded Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:20:49 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:20:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleDisabled::test_keys_excluded[DSA] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:21:35 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh:
  emit_keys_to_console: false

2021-09-09 17:21:35 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh:
  emit_keys_to_console: false

2021-09-09 17:22:22 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:22:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:22:31 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:22:31 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:22:32 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e90c76e612f827fb'))
2021-09-09 17:22:38 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e90c76e612f827fb'))
2021-09-09 17:22:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:22:38 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:22:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:22:38 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:22:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleDisabled::test_keys_excluded[ECDSA] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:22:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:22:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleDisabled::test_keys_excluded[ED25519] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:22:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:22:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleDisabled::test_keys_excluded[RSA] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:22:39 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:22:39 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleDisabled::test_header_excluded Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:22:39 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:22:39 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_keys_to_console.py::TestKeysToConsoleDisabled::test_footer_excluded Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:22:39 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:22:39 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_lxd_bridge.py::TestLxdBridge::test_binaries_installed[lxc] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:23:24 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
lxd:
  init:
    storage_backend: dir
  bridge:
    mode: new
    name: lxdbr0
    ipv4_address: 10.100.100.1
    ipv4_netmask: 24
    ipv4_dhcp_first: 10.100.100.100
    ipv4_dhcp_last: 10.100.100.200
    ipv4_nat: true
    domain: lxd

2021-09-09 17:23:24 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
lxd:
  init:
    storage_backend: dir
  bridge:
    mode: new
    name: lxdbr0
    ipv4_address: 10.100.100.1
    ipv4_netmask: 24
    ipv4_dhcp_first: 10.100.100.100
    ipv4_dhcp_last: 10.100.100.200
    ipv4_nat: true
    domain: lxd

2021-09-09 17:23:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:23:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:23:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:23:59 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:24:00 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:24:00 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:24:02 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0d4eaf839a5cda3a4'))
2021-09-09 17:24:17 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0d4eaf839a5cda3a4'))
2021-09-09 17:24:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:24:17 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:24:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:24:17 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:24:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- which lxc
PASSED
tests/integration_tests/modules/test_lxd_bridge.py::TestLxdBridge::test_binaries_installed[lxd] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:24:17 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:24:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- which lxd
PASSED
tests/integration_tests/modules/test_lxd_bridge.py::TestLxdBridge::test_bridge Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:24:17 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:24:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
2021-09-09 17:24:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ip addr show lxdbr0'
2021-09-09 17:24:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'lxc network show lxdbr0'
PASSED
tests/integration_tests/modules/test_ntp_servers.py::TestNtpServers::test_ntp_installed Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:25:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  ntp_client: ntp
  servers:
      - 172.16.15.14
      - 172.16.17.18
  pools:
      - 0.cloud-init.mypool
      - 1.cloud-init.mypool
      - 172.16.15.15

2021-09-09 17:25:03 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  ntp_client: ntp
  servers:
      - 172.16.15.14
      - 172.16.17.18
  pools:
      - 0.cloud-init.mypool
      - 1.cloud-init.mypool
      - 172.16.15.15

2021-09-09 17:25:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:25:39 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:25:41 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:25:42 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:25:42 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:25:42 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:25:44 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-04aec9726cb4cd905'))
2021-09-09 17:26:00 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-04aec9726cb4cd905'))
2021-09-09 17:26:00 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:26:01 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:26:01 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:26:01 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:26:01 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ntpd --version'
PASSED
tests/integration_tests/modules/test_ntp_servers.py::TestNtpServers::test_dist_config_file_is_empty Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:26:01 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:26:01 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -e /etc/ntp.conf.dist'
SKIPPED
tests/integration_tests/modules/test_ntp_servers.py::TestNtpServers::test_ntp_entries Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:26:01 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:26:01 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ntp.conf'
PASSED
tests/integration_tests/modules/test_ntp_servers.py::TestNtpServers::test_ntpq_servers Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:26:01 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:26:01 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ntpq -p -w -n'
PASSED
tests/integration_tests/modules/test_ntp_servers.py::test_chrony Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:26:32 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  enabled: true
  ntp_client: chrony
  servers:
      - 172.16.15.14

2021-09-09 17:26:32 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  enabled: true
  ntp_client: chrony
  servers:
      - 172.16.15.14

2021-09-09 17:27:03 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:27:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:27:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:27:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:27:08 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:27:08 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:27:08 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:27:10 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-045f32d3024bd711a'))
2021-09-09 17:27:26 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-045f32d3024bd711a'))
2021-09-09 17:27:26 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:27:26 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:27:26 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:27:26 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:27:26 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /etc/chrony.conf'
2021-09-09 17:27:26 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/chrony/chrony.conf'
PASSED
tests/integration_tests/modules/test_ntp_servers.py::test_timesyncd Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:28:12 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  enabled: true
  ntp_client: systemd-timesyncd
  servers:
      - 172.16.15.14

2021-09-09 17:28:12 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  enabled: true
  ntp_client: systemd-timesyncd
  servers:
      - 172.16.15.14

2021-09-09 17:28:44 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:28:45 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:28:46 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:28:47 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:28:47 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:28:47 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:28:48 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0f46116821cb747d5'))
2021-09-09 17:28:52 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0f46116821cb747d5'))
2021-09-09 17:28:52 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:28:53 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:28:53 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:28:53 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:28:53 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/systemd/timesyncd.conf.d/cloud-init.conf'
PASSED
tests/integration_tests/modules/test_ntp_servers.py::test_empty_ntp Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:29:39 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  ntp_client: ntp
  pools: []
  servers: []

2021-09-09 17:29:39 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ntp:
  ntp_client: ntp
  pools: []
  servers: []

2021-09-09 17:30:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:30:13 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:30:14 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:30:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:30:15 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:30:15 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:30:17 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0b4f219733166aaef'))
2021-09-09 17:30:31 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0b4f219733166aaef'))
2021-09-09 17:30:31 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:30:32 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:30:32 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:30:32 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:30:32 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ntpd --version'
2021-09-09 17:30:32 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /etc/ntp.conf.dist'
2021-09-09 17:30:32 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep -v "^#" /etc/ntp.conf'
PASSED
tests/integration_tests/modules/test_package_update_upgrade_install.py::TestPackageUpdateUpgradeInstall::test_new_packages_are_installed Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:31:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
packages:
  - sl
  - tree
package_update: true
package_upgrade: true

2021-09-09 17:31:03 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
packages:
  - sl
  - tree
package_update: true
package_upgrade: true

2021-09-09 17:31:34 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:31:36 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:31:37 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:31:39 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:31:40 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:31:40 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:31:40 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:31:42 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-04e2e4f9e29ce6206'))
2021-09-09 17:32:29 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-04e2e4f9e29ce6206'))
2021-09-09 17:32:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:32:30 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:32:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:32:30 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:32:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'dpkg-query --show'
PASSED
tests/integration_tests/modules/test_package_update_upgrade_install.py::TestPackageUpdateUpgradeInstall::test_packages_were_updated Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:32:30 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:32:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep ^Commandline: /var/log/apt/history.log'
PASSED
tests/integration_tests/modules/test_package_update_upgrade_install.py::TestPackageUpdateUpgradeInstall::test_packages_were_upgraded Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:32:30 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:32:30 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_persistence.py::test_log_message_on_missing_version_file SKIPPED
tests/integration_tests/modules/test_power_state_change.py::TestPowerChange::test_poweroff[poweroff-now-10-will execute: shutdown -P now msg] SKIPPED
tests/integration_tests/modules/test_power_state_change.py::TestPowerChange::test_poweroff[reboot-now-0-will execute: shutdown -r now msg] SKIPPED
tests/integration_tests/modules/test_power_state_change.py::TestPowerChange::test_poweroff[halt-+1-0-will execute: shutdown -H +1 msg] SKIPPED
tests/integration_tests/modules/test_power_state_change.py::TestPowerChange::test_poweroff_false_condition SKIPPED
tests/integration_tests/modules/test_seed_random_data.py::TestSeedRandomData::test_seed_random_data Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:33:16 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
random_seed:
  data: 'MYUb34023nD:LFDK10913jk;dfnk:Df'
  encoding: raw
  file: /root/seed

2021-09-09 17:33:16 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
random_seed:
  data: 'MYUb34023nD:LFDK10913jk;dfnk:Df'
  encoding: raw
  file: /root/seed

2021-09-09 17:33:48 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:33:49 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:33:50 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:33:50 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:33:50 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:33:52 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0d0d9f61c15f8f1df'))
2021-09-09 17:33:56 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0d0d9f61c15f8f1df'))
2021-09-09 17:33:56 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:33:56 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:33:56 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:33:56 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:33:56 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'head -c 31 < /root/seed'
PASSED
tests/integration_tests/modules/test_set_hostname.py::TestHostname::test_hostname Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:34:42 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
hostname: cloudinit2

2021-09-09 17:34:42 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
hostname: cloudinit2

2021-09-09 17:35:13 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:35:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:35:16 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:35:16 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:35:16 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:35:18 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01ff2d0e6b5045fb0'))
2021-09-09 17:35:22 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01ff2d0e6b5045fb0'))
2021-09-09 17:35:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:35:22 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:35:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:35:22 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:35:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c hostname
PASSED
tests/integration_tests/modules/test_set_hostname.py::TestHostname::test_prefer_fqdn Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:36:08 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
prefer_fqdn_over_hostname: True
hostname: cloudinit1
fqdn: cloudinit2.test.io

2021-09-09 17:36:08 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
prefer_fqdn_over_hostname: True
hostname: cloudinit1
fqdn: cloudinit2.test.io

2021-09-09 17:36:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:36:55 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:36:55 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:36:57 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-026a9a503a60894dd'))
2021-09-09 17:36:58 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-026a9a503a60894dd'))
2021-09-09 17:36:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:36:58 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:36:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:36:58 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:36:58 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c hostname
PASSED
tests/integration_tests/modules/test_set_hostname.py::TestHostname::test_prefer_short_hostname Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:37:29 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
prefer_fqdn_over_hostname: False
hostname: cloudinit1
fqdn: cloudinit2.test.io

2021-09-09 17:37:29 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
prefer_fqdn_over_hostname: False
hostname: cloudinit1
fqdn: cloudinit2.test.io

2021-09-09 17:38:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:38:03 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:38:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:38:05 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:38:05 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:38:05 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:38:07 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-08ee1ca2939dcd0d0'))
2021-09-09 17:38:11 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-08ee1ca2939dcd0d0'))
2021-09-09 17:38:11 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:38:12 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:38:12 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:38:12 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:38:12 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c hostname
PASSED
tests/integration_tests/modules/test_set_hostname.py::TestHostname::test_hostname_and_fqdn Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:38:58 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
manage_etc_hosts: true
hostname: cloudinit1
fqdn: cloudinit2.i9n.cloud-init.io

2021-09-09 17:38:58 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
manage_etc_hosts: true
hostname: cloudinit1
fqdn: cloudinit2.i9n.cloud-init.io

2021-09-09 17:39:44 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:39:45 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:39:45 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:39:46 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01007ca0f1a89f4fb'))
2021-09-09 17:39:48 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01007ca0f1a89f4fb'))
2021-09-09 17:39:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:39:49 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:39:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:39:49 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:39:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c hostname
2021-09-09 17:39:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'hostname --fqdn'
2021-09-09 17:39:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep ^127 /etc/hosts'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_no_duplicate_users_in_shadow Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:40:35 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

2021-09-09 17:40:35 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
  list:
    - tom:mypassword123!
    - dick:RANDOM
    - harry:RANDOM
    - mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

2021-09-09 17:41:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:41:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:41:16 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:41:16 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:41:16 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:41:18 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e4ea89d27f4a958d'))
2021-09-09 17:41:22 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0e4ea89d27f4a958d'))
2021-09-09 17:41:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:41:23 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:41:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:41:23 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:41:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_users_dict_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:41:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:41:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_password_in_chpasswd_list_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:41:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:41:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:41:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:41:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:41:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:41:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_random_passwords_emitted_to_serial_console Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:41:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_explicit_password_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:44:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:44:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_shadow_expected_users Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:44:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:44:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordList::test_sshd_config Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:44:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:44:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_no_duplicate_users_in_shadow Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:44:49 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

2021-09-09 17:44:49 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_pwauth: yes
users:
  - default
  - name: tom
    # md5 gotomgo
    passwd: "$1$S7$tT1BEDIYrczeryDQJfdPe0"
    lock_passwd: false
  - name: dick
    # md5 gocubsgo
    passwd: "$1$ssisyfpf$YqvuJLfrrW6Cg/l53Pi1n1"
    lock_passwd: false
  - name: harry
    # sha512 goharrygo
    passwd: "$6$LF$9Z2p6rWK6TNC1DC6393ec0As.18KRAvKDbfsGJEdWN3sRQRwpdfoh37EQ3yUh69tP4GSrGW5XKHxMLiKowJgm/"
    lock_passwd: false
  - name: jane
    # sha256 gojanego
    passwd: "$5$iW$XsxmWCdpwIW8Yhv.Jn/R3uk6A4UaicfW5Xp7C9p9pg."
    lock_passwd: false
  - name: "mikey"
    lock_passwd: false

chpasswd:
    list: |
      tom:mypassword123!
      dick:RANDOM
      harry:RANDOM
      mikey:$5$xZ$B2YGGEx2AOf4PeW48KC6.QyT1W2B4rZ9Qbltudtha89

2021-09-09 17:45:20 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:45:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:45:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:45:31 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:45:31 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:45:31 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:45:33 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01d062d5d6f7315fd'))
2021-09-09 17:45:37 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01d062d5d6f7315fd'))
2021-09-09 17:45:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:45:37 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:45:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:45:37 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:45:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_users_dict_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:45:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:45:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_password_in_chpasswd_list_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:45:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:45:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:45:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:45:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_not_stored_in_cloud_init_output_log Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:45:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:45:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init-output.log'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_emitted_to_serial_console Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:45:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
FAILED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_explicit_password_set_correctly Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:50:40 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:50:40 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_shadow_expected_users Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:50:40 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:50:40 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/shadow'
PASSED
tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_sshd_config Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:50:40 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:50:40 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSED
tests/integration_tests/modules/test_snap.py::TestSnap::test_snap Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:51:26 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
package_update: true
snap:
  squashfuse_in_container: true
  commands:
    - snap install hello-world

2021-09-09 17:51:26 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
package_update: true
snap:
  squashfuse_in_container: true
  commands:
    - snap install hello-world

2021-09-09 17:51:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:51:59 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:52:00 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:52:00 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:52:00 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:52:02 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0c870eb4e2083fe46'))
2021-09-09 17:52:23 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0c870eb4e2083fe46'))
2021-09-09 17:52:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:52:24 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:52:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:52:24 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:52:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'snap list'
PASSED
tests/integration_tests/modules/test_ssh_auth_key_fingerprints.py::TestSshAuthkeyFingerprints::test_ssh_authkey_fingerprints_disable Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:53:10 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
no_ssh_fingerprints: true

2021-09-09 17:53:10 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
no_ssh_fingerprints: true

2021-09-09 17:53:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:53:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:53:58 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:53:58 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:54:00 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0b43b97b9de622454'))
2021-09-09 17:54:04 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0b43b97b9de622454'))
2021-09-09 17:54:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:54:04 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:54:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:54:04 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:54:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED
tests/integration_tests/modules/test_ssh_auth_key_fingerprints.py::TestSshAuthkeyFingerprints::test_ssh_authkey_fingerprints_enable Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:54:35 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_genkeytypes:
  - ecdsa
  - ed25519
ssh_authorized_keys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDXW9Gg5H7ehjdSc6qDzwNtgCy94XYHhEYlXZMO2+FJrH3wfHGiMfCwOHxcOMt2QiXItULthdeQWS9QjBSSjVRXf6731igFrqPFyS9qBlOQ5D29C4HBXFnQggGVpBNJ82IRJv7szbbe/vpgLBP4kttUza9Dr4e1YM1ln4PRnjfXea6T0m+m1ixNb5432pTXlqYOnNOxSIm1gHgMLxPuDrJvQERDKrSiKSjIdyC9Jd8t2e1tkNLY0stmckVRbhShmcJvlyofHWbc2Ca1mmtP7MlS1VQnfLkvU1IrFwkmaQmaggX6WR6coRJ6XFXdWcq/AI2K6GjSnl1dnnCxE8VCEXBlXgFzad+PMSG4yiL5j8Oo1ZVpkTdgBnw4okGqTYCXyZg6X00As9IBNQfZMFlQXlIo4FiWgj3CO5QHQOyOX6FuEumaU13GnERrSSdp9tCs1Qm3/DG2RSCQBWTfcgMcStIvKqvJ3IjFn0vGLvI3Ampnq9q1SHwmmzAPSdzcMA76HyMUA5VWaBvWHlUxzIM6unxZASnwvuCzpywSEB5J2OF+p6H+cStJwQ32XwmOG8pLp1srlVWpqZI58Du/lzrkPqONphoZx0LDV86w7RUz1ksDzAdcm0tvmNRFMN1a0frDs506oA3aWK0oDk4Nmvk8sXGTYYw3iQSkOvDUUlIsqdaO+w==

2021-09-09 17:54:35 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_genkeytypes:
  - ecdsa
  - ed25519
ssh_authorized_keys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDXW9Gg5H7ehjdSc6qDzwNtgCy94XYHhEYlXZMO2+FJrH3wfHGiMfCwOHxcOMt2QiXItULthdeQWS9QjBSSjVRXf6731igFrqPFyS9qBlOQ5D29C4HBXFnQggGVpBNJ82IRJv7szbbe/vpgLBP4kttUza9Dr4e1YM1ln4PRnjfXea6T0m+m1ixNb5432pTXlqYOnNOxSIm1gHgMLxPuDrJvQERDKrSiKSjIdyC9Jd8t2e1tkNLY0stmckVRbhShmcJvlyofHWbc2Ca1mmtP7MlS1VQnfLkvU1IrFwkmaQmaggX6WR6coRJ6XFXdWcq/AI2K6GjSnl1dnnCxE8VCEXBlXgFzad+PMSG4yiL5j8Oo1ZVpkTdgBnw4okGqTYCXyZg6X00As9IBNQfZMFlQXlIo4FiWgj3CO5QHQOyOX6FuEumaU13GnERrSSdp9tCs1Qm3/DG2RSCQBWTfcgMcStIvKqvJ3IjFn0vGLvI3Ampnq9q1SHwmmzAPSdzcMA76HyMUA5VWaBvWHlUxzIM6unxZASnwvuCzpywSEB5J2OF+p6H+cStJwQ32XwmOG8pLp1srlVWpqZI58Du/lzrkPqONphoZx0LDV86w7RUz1ksDzAdcm0tvmNRFMN1a0frDs506oA3aWK0oDk4Nmvk8sXGTYYw3iQSkOvDUUlIsqdaO+w==

2021-09-09 17:55:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:55:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:55:15 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:55:15 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:55:17 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0931c9c032aa50472'))
2021-09-09 17:55:21 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0931c9c032aa50472'))
2021-09-09 17:55:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:55:22 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:55:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:55:22 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:55:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/syslog'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_not_generated[/etc/ssh/ssh_host_dsa_key.pub] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:56:07 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_genkeytypes:
  - ecdsa
  - ed25519
authkey_hash: sha512

2021-09-09 17:56:07 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_genkeytypes:
  - ecdsa
  - ed25519
authkey_hash: sha512

2021-09-09 17:56:54 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:56:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:56:55 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:56:56 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:56:57 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-045d9d266e44bcb2f'))
2021-09-09 17:57:01 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-045d9d266e44bcb2f'))
2021-09-09 17:57:01 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:57:02 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:57:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:57:02 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -e /etc/ssh/ssh_host_dsa_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_not_generated[/etc/ssh/ssh_host_dsa_key] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:02 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -e /etc/ssh/ssh_host_dsa_key'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_not_generated[/etc/ssh/ssh_host_rsa_key.pub] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:02 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -e /etc/ssh/ssh_host_rsa_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_not_generated[/etc/ssh/ssh_host_rsa_key] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:02 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -e /etc/ssh/ssh_host_rsa_key'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_generated[/etc/ssh/ssh_host_ecdsa_key.pub] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:02 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ecdsa_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_generated[/etc/ssh/ssh_host_ecdsa_key] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ecdsa_key'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_generated[/etc/ssh/ssh_host_ed25519_key.pub] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ed25519_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_generate.py::TestSshKeysGenerate::test_ssh_keys_generated[/etc/ssh/ssh_host_ed25519_key] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:03 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 17:57:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ed25519_key'
PASSED
tests/integration_tests/modules/test_ssh_import_id.py::TestSshImportId::test_ssh_import_id Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:57:49 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_import_id:
  - gh:powersj
  - lp:smoser

2021-09-09 17:57:49 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
ssh_import_id:
  - gh:powersj
  - lp:smoser

2021-09-09 17:58:20 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:58:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:58:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:58:30 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:58:30 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:58:32 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01242f3cbf7dd6995'))
2021-09-09 17:58:37 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-01242f3cbf7dd6995'))
2021-09-09 17:58:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:58:37 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 17:58:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 17:58:37 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 17:58:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/ubuntu/.ssh/authorized_keys'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_dsa_key.pub-AAAAB3NzaC1kc3MAAACBAPkWy1zbchVIN7qTgM0/yyY8q4RZS8cNM4ZpeuE5UB/Nnr6OSU/nmbO8LuM] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 17:59:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
disable_root: false
ssh_authorized_keys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDXW9Gg5H7ehjdSc6qDzwNtgCy94XYHhEYlXZMO2+FJrH3wfHGiMfCwOHxcOMt2QiXItULthdeQWS9QjBSSjVRXf6731igFrqPFyS9qBlOQ5D29C4HBXFnQggGVpBNJ82IRJv7szbbe/vpgLBP4kttUza9Dr4e1YM1ln4PRnjfXea6T0m+m1ixNb5432pTXlqYOnNOxSIm1gHgMLxPuDrJvQERDKrSiKSjIdyC9Jd8t2e1tkNLY0stmckVRbhShmcJvlyofHWbc2Ca1mmtP7MlS1VQnfLkvU1IrFwkmaQmaggX6WR6coRJ6XFXdWcq/AI2K6GjSnl1dnnCxE8VCEXBlXgFzad+PMSG4yiL5j8Oo1ZVpkTdgBnw4okGqTYCXyZg6X00As9IBNQfZMFlQXlIo4FiWgj3CO5QHQOyOX6FuEumaU13GnERrSSdp9tCs1Qm3/DG2RSCQBWTfcgMcStIvKqvJ3IjFn0vGLvI3Ampnq9q1SHwmmzAPSdzcMA76HyMUA5VWaBvWHlUxzIM6unxZASnwvuCzpywSEB5J2OF+p6H+cStJwQ32XwmOG8pLp1srlVWpqZI58Du/lzrkPqONphoZx0LDV86w7RUz1ksDzAdcm0tvmNRFMN1a0frDs506oA3aWK0oDk4Nmvk8sXGTYYw3iQSkOvDUUlIsqdaO+w==
ssh_keys:
  rsa_private: |
    -----BEGIN RSA PRIVATE KEY-----
    MIIEowIBAAKCAQEAtPx6PqN3iSEsnTtibyIEy52Tra8T5fn0ryXyg46Di2NBwdnj
    o8trNv9jenfV/UhmePl58lXjT43wV8OCMl6KsYXyBdegM35NNtono4I4mLLKFMR9
    9TOtDn6iYcaNenVhF3ZCj9Z2nNOlTrdc0uchHqKMrxLjCRCUrL91Uf+xioTF901Y
    RM+ZqC5lT92yAL76F4qPF+Lq1QtUfNfUIwwvOp5ccDZLPxij0YvyBzubYye9hJHu
    yjbJv78R4JHV+L2WhzSoX3W/6WrxVzeXqFGqH894ccOaC/7tnqSP6V8lIQ6fE2+c
    DurJcpM3CJRgkndGHjtU55Y71YkcdLksSMvezQIDAQABAoIBAQCrU4IJP8dNeaj5
    IpkY6NQvR/jfZqfogYi+MKb1IHin/4rlDfUvPcY9pt8ttLlObjYK+OcWn3Vx/sRw
    4DOkqNiUGl80Zp1RgZNohHUXlJMtAbrIlAVEk+mTmg7vjfyp2unRQvLZpMRdywBm
    lq95OrCghnG03aUsFJUZPpi5ydnwbA12ma+KHkG0EzaVlhA7X9N6z0K6U+zue2gl
    goMLt/MH0rsYawkHrwiwXaIFQeyV4MJP0vmrZLbFk1bycu9X/xPtTYotWyWo4eKA
    cb05uu04qwexkKHDM0KXtT0JecbTo2rOefFo8Uuab6uJY+fEHNocZ+v1vLA4aOxJ
    ovp1JuXlAoGBAOWYNgKrlTfy5n0sKsNk+1RuL2jHJZJ3HMd0EIt7/fFQN3Fi08Hu
    jtntqD30Wj+DJK8b8Lrt66FruxyEJm5VhVmwkukrLR5ige2f6ftZnoFCmdyy+0zP
    dnPZSUe2H5ZPHa+qthJgHLn+al2P04tGh+1fGHC2PbP+e0Co+/ZRIOxrAoGBAMnN
    IEen9/FRsqvnDd36I8XnJGskVRTZNjylxBmbKcuMWm+gNhOI7gsCAcqzD4BYZjjW
    pLhrt/u9p+l4MOJy6OUUdM/okg12SnJEGryysOcVBcXyrvOfklWnANG4EAH5jt1N
    ftTb1XTxzvWVuR/WJK0B5MZNYM71cumBdUDtPi+nAoGAYmoIXMSnxb+8xNL10aOr
    h9ljQQp8NHgSQfyiSufvRk0YNuYh1vMnEIsqnsPrG2Zfhx/25GmvoxXGssaCorDN
    5FAn6QK06F1ZTD5L0Y3sv4OI6G1gAuC66ZWuL6sFhyyKkQ4f1WiVZ7SCa3CHQSAO
    i9VDaKz1bf4bXvAQcNj9v9kCgYACSOZCqW4vN0OUmqsXhkt9ZB6Pb/veno70pNPR
    jmYsvcwQU3oJQpWfXkhy6RAV3epaXmPDCsUsfns2M3wqNC7a2R5xdCqjKGGzZX4A
    AO3rz9se4J6Gd5oKijeCKFlWDGNHsibrdgm2pz42nZlY+O21X74dWKbt8O16I1MW
    hxkbJQKBgAXfuen/srVkJgPuqywUYag90VWCpHsuxdn+fZJa50SyZADr+RbiDfH2
    vek8Uo8ap8AEsv4Rfs9opUcUZevLp3g2741eOaidHVLm0l4iLIVl03otGOqvSzs+
    A3tFPEOxauXpzCt8f8eXsz0WQXAgIKW2h8zu5QHjomioU3i27mtE
    -----END RSA PRIVATE KEY-----
  rsa_public: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC0/Ho+o3eJISydO2JvIgTLnZOtrxPl+fSvJfKDjoOLY0HB2eOjy2s2/2N6d9X9SGZ4+XnyVeNPjfBXw4IyXoqxhfIF16Azfk022iejgjiYssoUxH31M60OfqJhxo16dWEXdkKP1nac06VOt1zS5yEeooyvEuMJEJSsv3VR/7GKhMX3TVhEz5moLmVP3bIAvvoXio8X4urVC1R819QjDC86nlxwNks/GKPRi/IHO5tjJ72Eke7KNsm/vxHgkdX4vZaHNKhfdb/pavFXN5eoUaofz3hxw5oL/u2epI/pXyUhDp8Tb5wO6slykzcIlGCSd0YeO1TnljvViRx0uSxIy97N root@xenial-lxd
  rsa_certificate: ssh-rsa-cert-v01@openssh.com AAAAHHNzaC1yc2EtY2VydC12MDFAb3BlbnNzaC5jb20AAAAgMpgBP4Phn3L8I7Vqh7lmHKcOfIokEvSEbHDw83Y3JloAAAADAQABAAABAQC0/Ho+o3eJISydO2JvIgTLnZOtrxPl+fSvJfKDjoOLY0HB2eOjy2s2/2N6d9X9SGZ4+XnyVeNPjfBXw4IyXoqxhfIF16Azfk022iejgjiYssoUxH31M60OfqJhxo16dWEXdkKP1nac06VOt1zS5yEeooyvEuMJEJSsv3VR/7GKhMX3TVhEz5moLmVP3bIAvvoXio8X4urVC1R819QjDC86nlxwNks/GKPRi/IHO5tjJ72Eke7KNsm/vxHgkdX4vZaHNKhfdb/pavFXN5eoUaofz3hxw5oL/u2epI/pXyUhDp8Tb5wO6slykzcIlGCSd0YeO1TnljvViRx0uSxIy97NAAAAAAAAAAAAAAACAAAACnhlbmlhbC1seGQAAAAAAAAAAF+vVEIAAAAAYY83bgAAAAAAAAAAAAAAAAAAADMAAAALc3NoLWVkMjU1MTkAAAAgz4SlDwbq53ZrRsnS6ISdwxgFDRpnEX44K8jFmLpI9NAAAABTAAAAC3NzaC1lZDI1NTE5AAAAQMWpiRWKNMFvRX0g6OQOELMqDhtNBpkIN92IyO25qiY2oDSd1NyVme6XnGDFt8CS7z5NufV04doP4aacLOBbQww= root@xenial-lxd
  dsa_private: |
    -----BEGIN DSA PRIVATE KEY-----
    MIIBuwIBAAKBgQD5Fstc23IVSDe6k4DNP8smPKuEWUvHDTOGaXrhOVAfzZ6+jklP
    55mzvC7jO53PWWC31hq10xBoWdev0WtcNF9Tv+4bAa1263y51Rqo4GI7xx+xic1d
    mLqqfYijBT9k48J/1tV0cs1Wjs6FP/IJTD/kYVC930JjYQMi722lBnUxsQIVAL7i
    z3fTGKTvSzvW0wQlwnYpS2QFAoGANp+KdyS9V93HgxGQEN1rlj/TSv/a3EVdCKtE
    nQf55aPHxDAVDVw5JtRh4pZbbRV4oGRPc9KOdjo5BU28vSM3Lmhkb+UaaDXwHkgI
    nK193o74DKjADWZxuLyyiKHiMOhxozoxDfjWxs8nz6uqvSW0pr521EwIY6RajbED
    nZ2a3GkCgYEAyoUomNRB6bmpsIfzt8zdtqLP5umIj2uhr9MVPL8/QdbxmJ72Z7pf
    Q2z1B7QAdIBGOlqJXtlau7ABhWK29Efe+99ObyTSSdDc6RCDeAwUmBAiPRQhDH2E
    wExw3doDSCUb28L1B50wBzQ8mC3KXp6C7IkBXWspb16DLHUHFSI8bkICFA5kVUcW
    nCPOXEQsayANi8+Cb7BH
    -----END DSA PRIVATE KEY-----
  dsa_public: ssh-dss AAAAB3NzaC1kc3MAAACBAPkWy1zbchVIN7qTgM0/yyY8q4RZS8cNM4ZpeuE5UB/Nnr6OSU/nmbO8LuM7nc9ZYLfWGrXTEGhZ16/Ra1w0X1O/7hsBrXbrfLnVGqjgYjvHH7GJzV2Yuqp9iKMFP2Tjwn/W1XRyzVaOzoU/8glMP+RhUL3fQmNhAyLvbaUGdTGxAAAAFQC+4s930xik70s71tMEJcJ2KUtkBQAAAIA2n4p3JL1X3ceDEZAQ3WuWP9NK/9rcRV0Iq0SdB/nlo8fEMBUNXDkm1GHillttFXigZE9z0o52OjkFTby9IzcuaGRv5RpoNfAeSAicrX3ejvgMqMANZnG4vLKIoeIw6HGjOjEN+NbGzyfPq6q9JbSmvnbUTAhjpFqNsQOdnZrcaQAAAIEAyoUomNRB6bmpsIfzt8zdtqLP5umIj2uhr9MVPL8/QdbxmJ72Z7pfQ2z1B7QAdIBGOlqJXtlau7ABhWK29Efe+99ObyTSSdDc6RCDeAwUmBAiPRQhDH2EwExw3doDSCUb28L1B50wBzQ8mC3KXp6C7IkBXWspb16DLHUHFSI8bkI= root@xenial-lxd
  ed25519_private: |
    -----BEGIN OPENSSH PRIVATE KEY-----
    b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
    QyNTUxOQAAACDbnQGUruL42aVVsyHeaV5mYNTOhteXao0Nl5DVThJ2+QAAAJgwt+lcMLfp
    XAAAAAtzc2gtZWQyNTUxOQAAACDbnQGUruL42aVVsyHeaV5mYNTOhteXao0Nl5DVThJ2+Q
    AAAEDQlFZpz9q8+/YJHS9+jPAqy2ZT6cGEv8HTB6RZtTjd/dudAZSu4vjZpVWzId5pXmZg
    1M6G15dqjQ2XkNVOEnb5AAAAD3Jvb3RAeGVuaWFsLWx4ZAECAwQFBg==
    -----END OPENSSH PRIVATE KEY-----
  ed25519_public: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINudAZSu4vjZpVWzId5pXmZg1M6G15dqjQ2XkNVOEnb5 root@xenial-lxd
  ecdsa_private: |
    -----BEGIN EC PRIVATE KEY-----
    MHcCAQEEIDuK+QFc1wmyJY8uDqQVa1qHte30Rk/fdLxGIBkwJAyOoAoGCCqGSM49
    AwEHoUQDQgAEWxLlO+TL8gL91eET9p/HFQbqR1A691AkJgZk3jY5mpZqxgX4vcgb
    7f/CtXuM6s2svcDJqAeXr6Wk8OJJcMxylA==
    -----END EC PRIVATE KEY-----
  ecdsa_public: ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBFsS5Tvky/IC/dXhE/afxxUG6kdQOvdQJCYGZN42OZqWasYF+L3IG+3/wrV7jOrNrL3AyagHl6+lpPDiSXDMcpQ= root@xenial-lxd

2021-09-09 17:59:23 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
disable_root: false
ssh_authorized_keys:
  - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDXW9Gg5H7ehjdSc6qDzwNtgCy94XYHhEYlXZMO2+FJrH3wfHGiMfCwOHxcOMt2QiXItULthdeQWS9QjBSSjVRXf6731igFrqPFyS9qBlOQ5D29C4HBXFnQggGVpBNJ82IRJv7szbbe/vpgLBP4kttUza9Dr4e1YM1ln4PRnjfXea6T0m+m1ixNb5432pTXlqYOnNOxSIm1gHgMLxPuDrJvQERDKrSiKSjIdyC9Jd8t2e1tkNLY0stmckVRbhShmcJvlyofHWbc2Ca1mmtP7MlS1VQnfLkvU1IrFwkmaQmaggX6WR6coRJ6XFXdWcq/AI2K6GjSnl1dnnCxE8VCEXBlXgFzad+PMSG4yiL5j8Oo1ZVpkTdgBnw4okGqTYCXyZg6X00As9IBNQfZMFlQXlIo4FiWgj3CO5QHQOyOX6FuEumaU13GnERrSSdp9tCs1Qm3/DG2RSCQBWTfcgMcStIvKqvJ3IjFn0vGLvI3Ampnq9q1SHwmmzAPSdzcMA76HyMUA5VWaBvWHlUxzIM6unxZASnwvuCzpywSEB5J2OF+p6H+cStJwQ32XwmOG8pLp1srlVWpqZI58Du/lzrkPqONphoZx0LDV86w7RUz1ksDzAdcm0tvmNRFMN1a0frDs506oA3aWK0oDk4Nmvk8sXGTYYw3iQSkOvDUUlIsqdaO+w==
ssh_keys:
  rsa_private: |
    -----BEGIN RSA PRIVATE KEY-----
    MIIEowIBAAKCAQEAtPx6PqN3iSEsnTtibyIEy52Tra8T5fn0ryXyg46Di2NBwdnj
    o8trNv9jenfV/UhmePl58lXjT43wV8OCMl6KsYXyBdegM35NNtono4I4mLLKFMR9
    9TOtDn6iYcaNenVhF3ZCj9Z2nNOlTrdc0uchHqKMrxLjCRCUrL91Uf+xioTF901Y
    RM+ZqC5lT92yAL76F4qPF+Lq1QtUfNfUIwwvOp5ccDZLPxij0YvyBzubYye9hJHu
    yjbJv78R4JHV+L2WhzSoX3W/6WrxVzeXqFGqH894ccOaC/7tnqSP6V8lIQ6fE2+c
    DurJcpM3CJRgkndGHjtU55Y71YkcdLksSMvezQIDAQABAoIBAQCrU4IJP8dNeaj5
    IpkY6NQvR/jfZqfogYi+MKb1IHin/4rlDfUvPcY9pt8ttLlObjYK+OcWn3Vx/sRw
    4DOkqNiUGl80Zp1RgZNohHUXlJMtAbrIlAVEk+mTmg7vjfyp2unRQvLZpMRdywBm
    lq95OrCghnG03aUsFJUZPpi5ydnwbA12ma+KHkG0EzaVlhA7X9N6z0K6U+zue2gl
    goMLt/MH0rsYawkHrwiwXaIFQeyV4MJP0vmrZLbFk1bycu9X/xPtTYotWyWo4eKA
    cb05uu04qwexkKHDM0KXtT0JecbTo2rOefFo8Uuab6uJY+fEHNocZ+v1vLA4aOxJ
    ovp1JuXlAoGBAOWYNgKrlTfy5n0sKsNk+1RuL2jHJZJ3HMd0EIt7/fFQN3Fi08Hu
    jtntqD30Wj+DJK8b8Lrt66FruxyEJm5VhVmwkukrLR5ige2f6ftZnoFCmdyy+0zP
    dnPZSUe2H5ZPHa+qthJgHLn+al2P04tGh+1fGHC2PbP+e0Co+/ZRIOxrAoGBAMnN
    IEen9/FRsqvnDd36I8XnJGskVRTZNjylxBmbKcuMWm+gNhOI7gsCAcqzD4BYZjjW
    pLhrt/u9p+l4MOJy6OUUdM/okg12SnJEGryysOcVBcXyrvOfklWnANG4EAH5jt1N
    ftTb1XTxzvWVuR/WJK0B5MZNYM71cumBdUDtPi+nAoGAYmoIXMSnxb+8xNL10aOr
    h9ljQQp8NHgSQfyiSufvRk0YNuYh1vMnEIsqnsPrG2Zfhx/25GmvoxXGssaCorDN
    5FAn6QK06F1ZTD5L0Y3sv4OI6G1gAuC66ZWuL6sFhyyKkQ4f1WiVZ7SCa3CHQSAO
    i9VDaKz1bf4bXvAQcNj9v9kCgYACSOZCqW4vN0OUmqsXhkt9ZB6Pb/veno70pNPR
    jmYsvcwQU3oJQpWfXkhy6RAV3epaXmPDCsUsfns2M3wqNC7a2R5xdCqjKGGzZX4A
    AO3rz9se4J6Gd5oKijeCKFlWDGNHsibrdgm2pz42nZlY+O21X74dWKbt8O16I1MW
    hxkbJQKBgAXfuen/srVkJgPuqywUYag90VWCpHsuxdn+fZJa50SyZADr+RbiDfH2
    vek8Uo8ap8AEsv4Rfs9opUcUZevLp3g2741eOaidHVLm0l4iLIVl03otGOqvSzs+
    A3tFPEOxauXpzCt8f8eXsz0WQXAgIKW2h8zu5QHjomioU3i27mtE
    -----END RSA PRIVATE KEY-----
  rsa_public: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC0/Ho+o3eJISydO2JvIgTLnZOtrxPl+fSvJfKDjoOLY0HB2eOjy2s2/2N6d9X9SGZ4+XnyVeNPjfBXw4IyXoqxhfIF16Azfk022iejgjiYssoUxH31M60OfqJhxo16dWEXdkKP1nac06VOt1zS5yEeooyvEuMJEJSsv3VR/7GKhMX3TVhEz5moLmVP3bIAvvoXio8X4urVC1R819QjDC86nlxwNks/GKPRi/IHO5tjJ72Eke7KNsm/vxHgkdX4vZaHNKhfdb/pavFXN5eoUaofz3hxw5oL/u2epI/pXyUhDp8Tb5wO6slykzcIlGCSd0YeO1TnljvViRx0uSxIy97N root@xenial-lxd
  rsa_certificate: ssh-rsa-cert-v01@openssh.com AAAAHHNzaC1yc2EtY2VydC12MDFAb3BlbnNzaC5jb20AAAAgMpgBP4Phn3L8I7Vqh7lmHKcOfIokEvSEbHDw83Y3JloAAAADAQABAAABAQC0/Ho+o3eJISydO2JvIgTLnZOtrxPl+fSvJfKDjoOLY0HB2eOjy2s2/2N6d9X9SGZ4+XnyVeNPjfBXw4IyXoqxhfIF16Azfk022iejgjiYssoUxH31M60OfqJhxo16dWEXdkKP1nac06VOt1zS5yEeooyvEuMJEJSsv3VR/7GKhMX3TVhEz5moLmVP3bIAvvoXio8X4urVC1R819QjDC86nlxwNks/GKPRi/IHO5tjJ72Eke7KNsm/vxHgkdX4vZaHNKhfdb/pavFXN5eoUaofz3hxw5oL/u2epI/pXyUhDp8Tb5wO6slykzcIlGCSd0YeO1TnljvViRx0uSxIy97NAAAAAAAAAAAAAAACAAAACnhlbmlhbC1seGQAAAAAAAAAAF+vVEIAAAAAYY83bgAAAAAAAAAAAAAAAAAAADMAAAALc3NoLWVkMjU1MTkAAAAgz4SlDwbq53ZrRsnS6ISdwxgFDRpnEX44K8jFmLpI9NAAAABTAAAAC3NzaC1lZDI1NTE5AAAAQMWpiRWKNMFvRX0g6OQOELMqDhtNBpkIN92IyO25qiY2oDSd1NyVme6XnGDFt8CS7z5NufV04doP4aacLOBbQww= root@xenial-lxd
  dsa_private: |
    -----BEGIN DSA PRIVATE KEY-----
    MIIBuwIBAAKBgQD5Fstc23IVSDe6k4DNP8smPKuEWUvHDTOGaXrhOVAfzZ6+jklP
    55mzvC7jO53PWWC31hq10xBoWdev0WtcNF9Tv+4bAa1263y51Rqo4GI7xx+xic1d
    mLqqfYijBT9k48J/1tV0cs1Wjs6FP/IJTD/kYVC930JjYQMi722lBnUxsQIVAL7i
    z3fTGKTvSzvW0wQlwnYpS2QFAoGANp+KdyS9V93HgxGQEN1rlj/TSv/a3EVdCKtE
    nQf55aPHxDAVDVw5JtRh4pZbbRV4oGRPc9KOdjo5BU28vSM3Lmhkb+UaaDXwHkgI
    nK193o74DKjADWZxuLyyiKHiMOhxozoxDfjWxs8nz6uqvSW0pr521EwIY6RajbED
    nZ2a3GkCgYEAyoUomNRB6bmpsIfzt8zdtqLP5umIj2uhr9MVPL8/QdbxmJ72Z7pf
    Q2z1B7QAdIBGOlqJXtlau7ABhWK29Efe+99ObyTSSdDc6RCDeAwUmBAiPRQhDH2E
    wExw3doDSCUb28L1B50wBzQ8mC3KXp6C7IkBXWspb16DLHUHFSI8bkICFA5kVUcW
    nCPOXEQsayANi8+Cb7BH
    -----END DSA PRIVATE KEY-----
  dsa_public: ssh-dss AAAAB3NzaC1kc3MAAACBAPkWy1zbchVIN7qTgM0/yyY8q4RZS8cNM4ZpeuE5UB/Nnr6OSU/nmbO8LuM7nc9ZYLfWGrXTEGhZ16/Ra1w0X1O/7hsBrXbrfLnVGqjgYjvHH7GJzV2Yuqp9iKMFP2Tjwn/W1XRyzVaOzoU/8glMP+RhUL3fQmNhAyLvbaUGdTGxAAAAFQC+4s930xik70s71tMEJcJ2KUtkBQAAAIA2n4p3JL1X3ceDEZAQ3WuWP9NK/9rcRV0Iq0SdB/nlo8fEMBUNXDkm1GHillttFXigZE9z0o52OjkFTby9IzcuaGRv5RpoNfAeSAicrX3ejvgMqMANZnG4vLKIoeIw6HGjOjEN+NbGzyfPq6q9JbSmvnbUTAhjpFqNsQOdnZrcaQAAAIEAyoUomNRB6bmpsIfzt8zdtqLP5umIj2uhr9MVPL8/QdbxmJ72Z7pfQ2z1B7QAdIBGOlqJXtlau7ABhWK29Efe+99ObyTSSdDc6RCDeAwUmBAiPRQhDH2EwExw3doDSCUb28L1B50wBzQ8mC3KXp6C7IkBXWspb16DLHUHFSI8bkI= root@xenial-lxd
  ed25519_private: |
    -----BEGIN OPENSSH PRIVATE KEY-----
    b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
    QyNTUxOQAAACDbnQGUruL42aVVsyHeaV5mYNTOhteXao0Nl5DVThJ2+QAAAJgwt+lcMLfp
    XAAAAAtzc2gtZWQyNTUxOQAAACDbnQGUruL42aVVsyHeaV5mYNTOhteXao0Nl5DVThJ2+Q
    AAAEDQlFZpz9q8+/YJHS9+jPAqy2ZT6cGEv8HTB6RZtTjd/dudAZSu4vjZpVWzId5pXmZg
    1M6G15dqjQ2XkNVOEnb5AAAAD3Jvb3RAeGVuaWFsLWx4ZAECAwQFBg==
    -----END OPENSSH PRIVATE KEY-----
  ed25519_public: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINudAZSu4vjZpVWzId5pXmZg1M6G15dqjQ2XkNVOEnb5 root@xenial-lxd
  ecdsa_private: |
    -----BEGIN EC PRIVATE KEY-----
    MHcCAQEEIDuK+QFc1wmyJY8uDqQVa1qHte30Rk/fdLxGIBkwJAyOoAoGCCqGSM49
    AwEHoUQDQgAEWxLlO+TL8gL91eET9p/HFQbqR1A691AkJgZk3jY5mpZqxgX4vcgb
    7f/CtXuM6s2svcDJqAeXr6Wk8OJJcMxylA==
    -----END EC PRIVATE KEY-----
  ecdsa_public: ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBFsS5Tvky/IC/dXhE/afxxUG6kdQOvdQJCYGZN42OZqWasYF+L3IG+3/wrV7jOrNrL3AyagHl6+lpPDiSXDMcpQ= root@xenial-lxd

2021-09-09 17:59:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:59:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:59:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 17:59:57 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 17:59:57 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 17:59:59 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-075ef4cc3681cc63f'))
2021-09-09 18:00:03 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-075ef4cc3681cc63f'))
2021-09-09 18:00:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:00:03 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:00:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_dsa_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_dsa_key-MIIBuwIBAAKBgQD5Fstc23IVSDe6k4DNP8smPKuEWUvHDTOGaXrhOVAfzZ6+jklP] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_dsa_key'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_rsa_key.pub-AAAAB3NzaC1yc2EAAAADAQABAAABAQC0/Ho+o3eJISydO2JvIgTLnZOtrxPl+fSvJfKDjoOLY0HB2eOjy2s2/2N6d9X9SGZ4] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_rsa_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_rsa_key-4DOkqNiUGl80Zp1RgZNohHUXlJMtAbrIlAVEk+mTmg7vjfyp2unRQvLZpMRdywBm] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_rsa_key'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_rsa_key-cert.pub-AAAAHHNzaC1yc2EtY2VydC12MDFAb3BlbnNzaC5jb20AAAAgMpgBP4Phn3L8I7Vqh7lmHKcOfIokEvSEbHDw83Y3JloAAAAD] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_rsa_key-cert.pub'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/sshd_config-HostCertificate /etc/ssh/ssh_host_rsa_key-cert.pub] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/sshd_config'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_ecdsa_key.pub-AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBFsS5Tvky/IC/dXhE/afxxU] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ecdsa_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_ecdsa_key-AwEHoUQDQgAEWxLlO+TL8gL91eET9p/HFQbqR1A691AkJgZk3jY5mpZqxgX4vcgb] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ecdsa_key'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_ed25519_key.pub-AAAAC3NzaC1lZDI1NTE5AAAAINudAZSu4vjZpVWzId5pXmZg1M6G15dqjQ2XkNVOEnb5] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ed25519_key.pub'
PASSED
tests/integration_tests/modules/test_ssh_keys_provided.py::TestSshKeysProvided::test_ssh_provided_keys[/etc/ssh/ssh_host_ed25519_key-XAAAAAtzc2gtZWQyNTUxOQAAACDbnQGUruL42aVVsyHeaV5mYNTOhteXao0Nl5DVThJ2+Q] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:05 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:00:05 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/ssh_host_ed25519_key'
PASSED
tests/integration_tests/modules/test_ssh_keysfile.py::test_authorized_keys_default Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:00:35 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - ""
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:00:35 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - ""
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:01:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:01:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:01:15 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:15 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:01:17 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-00c203924eff18c79'))
2021-09-09 18:01:21 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-00c203924eff18c79'))
2021-09-09 18:01:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:01:21 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:01:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:01:22 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:01:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/test_user1/.ssh/authorized_keys'
2021-09-09 18:01:22 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:22 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user2 with key from test_user1
2021-09-09 18:01:22 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:22 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user1
2021-09-09 18:01:22 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:23 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user1
2021-09-09 18:01:23 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:23 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1'
2021-09-09 18:01:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user1/.ssh'
2021-09-09 18:01:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1/.ssh'
2021-09-09 18:01:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1/.ssh/authorized_keys'
2021-09-09 18:01:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user1/.ssh'
2021-09-09 18:01:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user1/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:01:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa'
2021-09-09 18:01:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa.pub'
2021-09-09 18:01:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/test_user2/.ssh/authorized_keys'
2021-09-09 18:01:24 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:24 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from test_user2
2021-09-09 18:01:24 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:24 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user2
2021-09-09 18:01:24 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:25 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user2
2021-09-09 18:01:25 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:25 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:25 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2'
2021-09-09 18:01:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user2/.ssh'
2021-09-09 18:01:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2/.ssh'
2021-09-09 18:01:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2/.ssh/authorized_keys'
2021-09-09 18:01:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user2/.ssh'
2021-09-09 18:01:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user2/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:01:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa'
2021-09-09 18:01:26 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa.pub'
2021-09-09 18:01:26 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/ubuntu/.ssh/authorized_keys'
2021-09-09 18:01:26 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:26 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from ubuntu
2021-09-09 18:01:26 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:26 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from ubuntu
2021-09-09 18:01:27 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:27 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:27 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu'
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/ubuntu/.ssh'
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu/.ssh'
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu/.ssh/authorized_keys'
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/ubuntu/.ssh'
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/ubuntu/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa'
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa.pub'
2021-09-09 18:01:27 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /root/.ssh/authorized_keys'
2021-09-09 18:01:28 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:28 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from root
2021-09-09 18:01:28 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:28 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from root
2021-09-09 18:01:28 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:01:28 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:29 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root'
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /root/.ssh'
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root/.ssh'
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root/.ssh/authorized_keys'
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /root/.ssh'
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /root/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa'
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa.pub'
2021-09-09 18:01:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home'
PASSED
tests/integration_tests/modules/test_ssh_keysfile.py::test_authorized_keys2 Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:02:00 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - sed -i 's;#AuthorizedKeysFile.*;AuthorizedKeysFile /etc/ssh/authorized_keys %h/.ssh/authorized_keys2;' /etc/ssh/sshd_config
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:02:00 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - sed -i 's;#AuthorizedKeysFile.*;AuthorizedKeysFile /etc/ssh/authorized_keys %h/.ssh/authorized_keys2;' /etc/ssh/sshd_config
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:02:32 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:02:34 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:02:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:02:35 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:35 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:02:37 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-058a21aa6e6473232'))
2021-09-09 18:02:42 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-058a21aa6e6473232'))
2021-09-09 18:02:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:02:42 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:02:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:02:42 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:02:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/test_user1/.ssh/authorized_keys2'
2021-09-09 18:02:43 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:43 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user2 with key from test_user1
2021-09-09 18:02:43 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:43 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user1
2021-09-09 18:02:43 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:43 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user1
2021-09-09 18:02:43 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:44 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:44 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1'
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user1/.ssh'
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1/.ssh'
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1/.ssh/authorized_keys2'
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user1/.ssh'
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user1/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa'
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa.pub'
2021-09-09 18:02:44 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/test_user2/.ssh/authorized_keys2'
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from test_user2
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user2
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user2
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:45 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:45 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:45 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2'
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user2/.ssh'
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2/.ssh'
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2/.ssh/authorized_keys2'
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user2/.ssh'
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user2/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa'
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa.pub'
2021-09-09 18:02:46 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/ubuntu/.ssh/authorized_keys2'
2021-09-09 18:02:47 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:47 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from ubuntu
2021-09-09 18:02:47 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:47 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from ubuntu
2021-09-09 18:02:47 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:47 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:47 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:47 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu'
2021-09-09 18:02:47 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/ubuntu/.ssh'
2021-09-09 18:02:47 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu/.ssh'
2021-09-09 18:02:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu/.ssh/authorized_keys2'
2021-09-09 18:02:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/ubuntu/.ssh'
2021-09-09 18:02:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/ubuntu/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:02:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa'
2021-09-09 18:02:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa.pub'
2021-09-09 18:02:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /root/.ssh/authorized_keys2'
2021-09-09 18:02:48 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:49 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from root
2021-09-09 18:02:49 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:49 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from root
2021-09-09 18:02:49 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:02:49 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:49 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:02:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root'
2021-09-09 18:02:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /root/.ssh'
2021-09-09 18:02:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root/.ssh'
2021-09-09 18:02:49 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root/.ssh/authorized_keys2'
2021-09-09 18:02:50 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /root/.ssh'
2021-09-09 18:02:50 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /root/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:02:50 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa'
2021-09-09 18:02:50 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa.pub'
2021-09-09 18:02:50 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home'
PASSED
tests/integration_tests/modules/test_ssh_keysfile.py::test_nested_keys Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:03:36 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - sed -i 's;#AuthorizedKeysFile.*;AuthorizedKeysFile /etc/ssh/authorized_keys %h/foo/bar/ssh/keys;' /etc/ssh/sshd_config
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:03:36 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - sed -i 's;#AuthorizedKeysFile.*;AuthorizedKeysFile /etc/ssh/authorized_keys %h/foo/bar/ssh/keys;' /etc/ssh/sshd_config
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:04:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:04:08 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:04:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:04:11 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:04:11 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:11 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:04:13 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0a3e331554266db0e'))
2021-09-09 18:04:17 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0a3e331554266db0e'))
2021-09-09 18:04:17 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:04:18 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:04:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:04:18 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:04:18 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/test_user1/foo/bar/ssh/keys'
2021-09-09 18:04:18 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:18 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user2 with key from test_user1
2021-09-09 18:04:18 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:18 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user1
2021-09-09 18:04:18 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:19 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user1
2021-09-09 18:04:19 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:19 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:19 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1'
2021-09-09 18:04:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user1/.ssh'
2021-09-09 18:04:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1/foo/bar/ssh/keys'
2021-09-09 18:04:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user1/.ssh'
2021-09-09 18:04:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user1/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:04:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa'
2021-09-09 18:04:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa.pub'
2021-09-09 18:04:20 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/test_user2/foo/bar/ssh/keys'
2021-09-09 18:04:20 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:20 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from test_user2
2021-09-09 18:04:20 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:20 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user2
2021-09-09 18:04:20 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:21 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user2
2021-09-09 18:04:21 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:21 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:21 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2'
2021-09-09 18:04:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user2/.ssh'
2021-09-09 18:04:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2/foo/bar/ssh/keys'
2021-09-09 18:04:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user2/.ssh'
2021-09-09 18:04:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user2/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:04:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa'
2021-09-09 18:04:21 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa.pub'
2021-09-09 18:04:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /home/ubuntu/foo/bar/ssh/keys'
2021-09-09 18:04:22 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:22 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from ubuntu
2021-09-09 18:04:22 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:22 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from ubuntu
2021-09-09 18:04:22 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:22 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:22 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:22 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu'
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/ubuntu/.ssh'
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu/.ssh'
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu/foo/bar/ssh/keys'
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/ubuntu/.ssh'
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/ubuntu/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa'
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa.pub'
2021-09-09 18:04:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /root/foo/bar/ssh/keys'
2021-09-09 18:04:24 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:24 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from root
2021-09-09 18:04:24 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:24 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from root
2021-09-09 18:04:24 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:04:24 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:24 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:04:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root'
2021-09-09 18:04:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /root/.ssh'
2021-09-09 18:04:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root/.ssh'
2021-09-09 18:04:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root/foo/bar/ssh/keys'
2021-09-09 18:04:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /root/.ssh'
2021-09-09 18:04:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /root/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:04:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa'
2021-09-09 18:04:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa.pub'
2021-09-09 18:04:25 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home'
PASSED
tests/integration_tests/modules/test_ssh_keysfile.py::test_external_keys Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:05:11 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - sed -i 's;#AuthorizedKeysFile.*;AuthorizedKeysFile /etc/ssh/authorized_keys /etc/ssh/authorized_keys/%u/keys;' /etc/ssh/sshd_config
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:05:11 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
bootcmd:
 - sed -i 's;#AuthorizedKeysFile.*;AuthorizedKeysFile /etc/ssh/authorized_keys /etc/ssh/authorized_keys/%u/keys;' /etc/ssh/sshd_config
ssh_authorized_keys:
 - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCk8bgx2RhAoPnv+qt4WuH0ZELbbLrqpk5ZlZGMLzzuutu8HM7r2FXImlMheV4kS+laIdhyMxHkbo00Wyc21nh/EOqZJzi9wWPncmwT9c2osqrqmxdp0Jvm+Q2kZvED5nlsmXMn3r0+AkggRuBzzqx6LiSBHYy49aq1ltjkaSk0JOpa4th4Ur7XigWu4DafJYf0w4hEMcr93n3umwfL4tMy3KY7tk+E7nvVpsrDqO+/CJJ4PFUT2RXsoBAi4z39LeB+2+BBCuifcYvfimCYhpt1IZ1t8eoYOiivImGVuq4lkQsE3bfoqBE1MICNW9TOONCvV5E/fGywbBU7oQIEYJAuX9piiACC3CfCP2Jeq1+IsrcTCWCOq5Tj4lDQJW0uEbeAhkH6qgxOFyjSmYdOuO19ALCvO2wEEW6dJrb8Ky25XWZDk7lmtnoAKj3I9EE2Sezr4KIp20y0K3OLeTZEPP2OliY9xqTTcuvsiR0LVOnr6MD7//I8dI7WjgKpbz0hDM0= test3@host

users:
- default
- name: test_user1
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC1GUb3ponbdRG8CA79sGy4uX6Wq5zfnRpLBX3z+Ly+W86fkZVwfJ63+tdCDiVnizSjAbeRbJAVjye9OT4b5Q1Tx83RqcDMEOL7gzOx6OQX2xyNMwWZdWsikgKpXdthA2M+/qv65tB2QPTV27d4H23n/OXziC2yGnSEF2h/LPy7X8Dbmzt9VTrsbIjs90q9pL7K8lIidmdvZ71VDN8kL6oCc3uBRlq0EqN2BS0l6JRR4NpWdpLXtvRqhP2IE7SwhxC05MGViUKMW3VMAwtnrgePdJ8ZkHtiPRn4vMUHYhZfXPOyMjrxiRg8o5Iv81iFBT17nmQlDtaeeA0dj/af8Dt00pIUOaAzlz0haB5nt+Omx8hgCgn8IDEUg0P48Qd3WAJLrGgSFpRXKHlYf9eTAq/WfHgCJnYEUIT7vmTJJEtlQn7nLSvcNTmS0xd5RHNUg/um7RHwMK6X4ZT4z/5MfJa0AQ6B5o0np9imjaKkOFuZNi3eSTaUwhqlHEYEWz7fux0= test1@host

- name: test_user2
  ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8rnQPY9Y5ziKTIdVElLq0OGrOMvlwqKK8gPinVfwFgJXDzdcAQY4uci1TJVcc0AOWHp+lWrU1joDYlW3KCg8XpkXHymHshYyaeEN2fEsvIaxuF3UzW2JckP9H7dacYdEng8qtBq8wuCodGuJ5XdBVV+MVJ6jqNf/hOu4/pma8hMxlYmtdoamHEn+k/KQR2Q6LwCYpT0U2+KiPI9Lac22P0H/rfkh2Ba+t3tV/lhyzD0xHnktZKJ3BrznpEfrZiXoukQZMebWUmIyTW7zwk9Kq+iGFpSQsqQWlxDBwHSbvpbUo7KWUmyZfxs1euVmwj5aKJgjteXm9CbbXsMS415q+08C0MzG7weZODZQnnk1rF6Ft97aXHaTmRgYbDeLU7U5U3alnb84HvUu5xh3/mrE9rPTfCzBwY4lgY+Q1zjS90RL9Jxzti3weydm7OqTI6DOfQeJQLOhhRgthOkt/7IabDFLIARjTnpo5+QKxugoc4qI6aUnE1plkVCRfV696ngM= test2@host


2021-09-09 18:05:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:05:58 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:05:58 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:06:00 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-063a3a3078ee986b4'))
2021-09-09 18:06:02 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-063a3a3078ee986b4'))
2021-09-09 18:06:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:06:02 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:06:02 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:06:03 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:06:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/authorized_keys/test_user1/keys'
2021-09-09 18:06:03 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:03 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user2 with key from test_user1
2021-09-09 18:06:03 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:03 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user1
2021-09-09 18:06:03 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:03 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user1
2021-09-09 18:06:04 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:04 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:04 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user1'
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user1/.ssh'
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /etc/ssh/authorized_keys/test_user1/keys'
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user1/.ssh'
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user1/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa'
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user1/.ssh/id_rsa.pub'
2021-09-09 18:06:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/authorized_keys/test_user2/keys'
2021-09-09 18:06:05 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:05 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from test_user2
2021-09-09 18:06:05 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:05 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as ubuntu with key from test_user2
2021-09-09 18:06:05 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:05 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as root with key from test_user2
2021-09-09 18:06:05 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:06 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:06 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/test_user2'
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/test_user2/.ssh'
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /etc/ssh/authorized_keys/test_user2/keys'
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/test_user2/.ssh'
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/test_user2/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa'
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/test_user2/.ssh/id_rsa.pub'
2021-09-09 18:06:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/authorized_keys/ubuntu/keys'
2021-09-09 18:06:07 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:07 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from ubuntu
2021-09-09 18:06:07 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:07 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from ubuntu
2021-09-09 18:06:07 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:07 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:07 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:07 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu'
2021-09-09 18:06:07 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /home/ubuntu/.ssh'
2021-09-09 18:06:07 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home/ubuntu/.ssh'
2021-09-09 18:06:07 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /etc/ssh/authorized_keys/ubuntu/keys'
2021-09-09 18:06:08 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /home/ubuntu/.ssh'
2021-09-09 18:06:08 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /home/ubuntu/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:06:08 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa'
2021-09-09 18:06:08 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /home/ubuntu/.ssh/id_rsa.pub'
2021-09-09 18:06:08 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/ssh/authorized_keys/root/keys'
2021-09-09 18:06:08 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:08 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
trying to connect as test_user1 with key from root
2021-09-09 18:06:08 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:09 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
trying to connect as test_user2 with key from root
2021-09-09 18:06:09 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:06:09 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) failed.
Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:09 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
2021-09-09 18:06:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root'
2021-09-09 18:06:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -d /root/.ssh'
2021-09-09 18:06:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /root/.ssh'
2021-09-09 18:06:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /etc/ssh/authorized_keys/root/keys'
2021-09-09 18:06:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mkdir /root/.ssh'
2021-09-09 18:06:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ssh-keygen -b 2048 -t rsa -f /root/.ssh/id_rsa -q -N '"'"''"'"''
2021-09-09 18:06:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa'
2021-09-09 18:06:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'test -f /root/.ssh/id_rsa.pub'
2021-09-09 18:06:10 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'stat -c "%U %a" /home'
PASSED
tests/integration_tests/modules/test_timezone.py::TestTimezone::test_timezone Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:06:40 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
timezone: US/Aleutian

2021-09-09 18:06:40 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
timezone: US/Aleutian

2021-09-09 18:07:27 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:07:28 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:07:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:07:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:07:32 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:07:32 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:07:32 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:07:33 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-05a96b079b47bab5a'))
2021-09-09 18:07:37 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-05a96b079b47bab5a'))
2021-09-09 18:07:37 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:07:38 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:07:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:07:38 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:07:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'date "+%Z" --date="Thu, 03 Nov 2016 00:47:00 -0400"'
PASSED
tests/integration_tests/modules/test_user_events.py::test_boot_event_disabled_by_default Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:08:24 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:08:24 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:08:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:08:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:08:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:08:58 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:08:58 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:09:00 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-02271771236bc309b'))
2021-09-09 18:09:03 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-02271771236bc309b'))
2021-09-09 18:09:03 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:09:04 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:09:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:09:04 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:09:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
2021-09-09 18:09:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ls /sys/class/net'
2021-09-09 18:09:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/netplan/50-cloud-init.yaml'
2021-09-09 18:09:04 INFO      paramiko.transport.sftp:sftp.py:158 [chan 7] Opened sftp connection (server version 3)
2021-09-09 18:09:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mv /var/tmp/4d77e153-58eb-4ba7-8974-229f19bfb1ea.tmp /etc/netplan/50-cloud-init.yaml'
2021-09-09 18:09:04 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'rm /var/log/cloud-init.log'
Restarting instance and waiting for boot
2021-09-09 18:09:04 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 18:09:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:09:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:09:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:09:11 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:09:12 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:09:13 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:09:14 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:09:16 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:17 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:18 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:19 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:20 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:21 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:22 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:24 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:25 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:26 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:27 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:28 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:31 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:33 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:34 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:36 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:37 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:38 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:39 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:40 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:42 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:43 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:44 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:45 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:46 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:47 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:48 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:49 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:50 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:52 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:53 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:54 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:10:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:00 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:02 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:03 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:05 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:09 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:10 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:11 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:12 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:13 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:14 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:16 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:17 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:19 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:20 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:21 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:22 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:23 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:24 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:25 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:26 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:28 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:29 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:31 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:32 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:33 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:34 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:36 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:37 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:38 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:39 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:40 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:41 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:42 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:43 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:44 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:45 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:47 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:48 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:49 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:50 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:51 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:11:51 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:11:51 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:11:52 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 18:11:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:11:56 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
SKIPPED
tests/integration_tests/modules/test_user_events.py::test_boot_event_enabled Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:12:42 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
updates:
  network:
    when: [boot]

2021-09-09 18:12:42 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
updates:
  network:
    when: [boot]

2021-09-09 18:13:14 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:13:22 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:13:22 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:13:22 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:13:24 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0af2a1884d5c1ebb2'))
2021-09-09 18:13:28 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-0af2a1884d5c1ebb2'))
2021-09-09 18:13:28 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:13:29 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:13:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:13:29 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:13:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
2021-09-09 18:13:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'ls /sys/class/net'
2021-09-09 18:13:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /etc/netplan/50-cloud-init.yaml'
2021-09-09 18:13:29 INFO      paramiko.transport.sftp:sftp.py:158 [chan 7] Opened sftp connection (server version 3)
2021-09-09 18:13:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mv /var/tmp/3bcab609-641d-4048-ac84-7cd3fb72f570.tmp /etc/netplan/50-cloud-init.yaml'
2021-09-09 18:13:29 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'rm /var/log/cloud-init.log'
Restarting instance and waiting for boot
2021-09-09 18:13:30 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 18:13:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:13:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:13:35 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:13:36 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:13:38 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:13:39 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:14:40 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:14:40 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:14:40 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:14:41 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 18:14:42 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:14:42 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
SKIPPED
tests/integration_tests/modules/test_users_groups.py::TestUsersGroups::test_users_groups[getent_args0-ubuntu:x:[0-9]{4}:] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:15:27 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
# Add groups to the system
groups:
  - secret: [root]
  - cloud-users

# Add users to the system. Users are added after groups are added.
users:
  - default
  - name: foobar
    gecos: Foo B. Bar
    primary_group: foobar
    groups: users
    expiredate: 2038-01-19
    lock_passwd: false
    passwd: $6$j212wezy$7H/1LT4f9/N3wpgNunhsIqtMj62OKiS3nyNwuizouQc3u7MbYCarYeAHWYPYb2FT.lbioDm2RrkJPb9BZMN1O/
  - name: barfoo
    gecos: Bar B. Foo
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: [cloud-users, secret]
    lock_passwd: true
  - name: cloudy
    gecos: Magic Cloud App Daemon User
    inactive: true
    system: true

2021-09-09 18:15:27 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
# Add groups to the system
groups:
  - secret: [root]
  - cloud-users

# Add users to the system. Users are added after groups are added.
users:
  - default
  - name: foobar
    gecos: Foo B. Bar
    primary_group: foobar
    groups: users
    expiredate: 2038-01-19
    lock_passwd: false
    passwd: $6$j212wezy$7H/1LT4f9/N3wpgNunhsIqtMj62OKiS3nyNwuizouQc3u7MbYCarYeAHWYPYb2FT.lbioDm2RrkJPb9BZMN1O/
  - name: barfoo
    gecos: Bar B. Foo
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: [cloud-users, secret]
    lock_passwd: true
  - name: cloudy
    gecos: Magic Cloud App Daemon User
    inactive: true
    system: true

2021-09-09 18:16:14 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:16:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:16:16 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:16:17 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:16:17 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:16:18 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-04be12a818ab65a00'))
2021-09-09 18:16:23 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-04be12a818ab65a00'))
2021-09-09 18:16:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:16:23 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:16:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:16:23 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:16:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- getent group ubuntu
PASSED
tests/integration_tests/modules/test_users_groups.py::TestUsersGroups::test_users_groups[getent_args1-cloud-users:x:[0-9]{4}:barfoo] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:16:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:16:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- getent group cloud-users
PASSED
tests/integration_tests/modules/test_users_groups.py::TestUsersGroups::test_users_groups[getent_args2-ubuntu:x:[0-9]{4}:[0-9]{4}:Ubuntu:/home/ubuntu:/bin/bash] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:16:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:16:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- getent passwd ubuntu
PASSED
tests/integration_tests/modules/test_users_groups.py::TestUsersGroups::test_users_groups[getent_args3-foobar:x:[0-9]{4}:[0-9]{4}:Foo B. Bar:/home/foobar:] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:16:23 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:16:23 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- getent passwd foobar
PASSED
tests/integration_tests/modules/test_users_groups.py::TestUsersGroups::test_users_groups[getent_args4-barfoo:x:[0-9]{4}:[0-9]{4}:Bar B. Foo:/home/barfoo:] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:16:24 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:16:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- getent passwd barfoo
PASSED
tests/integration_tests/modules/test_users_groups.py::TestUsersGroups::test_users_groups[getent_args5-cloudy:x:[0-9]{3,4}:] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:16:24 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:16:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- getent passwd cloudy
PASSED
tests/integration_tests/modules/test_users_groups.py::TestUsersGroups::test_user_root_in_secret Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:16:24 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:16:24 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'groups root'
PASSED
tests/integration_tests/modules/test_users_groups.py::test_sudoers_includedir Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:16:54 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
# Add groups to the system
groups:
  - secret: [root]
  - cloud-users

# Add users to the system. Users are added after groups are added.
users:
  - default
  - name: foobar
    gecos: Foo B. Bar
    primary_group: foobar
    groups: users
    expiredate: 2038-01-19
    lock_passwd: false
    passwd: $6$j212wezy$7H/1LT4f9/N3wpgNunhsIqtMj62OKiS3nyNwuizouQc3u7MbYCarYeAHWYPYb2FT.lbioDm2RrkJPb9BZMN1O/
  - name: barfoo
    gecos: Bar B. Foo
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: [cloud-users, secret]
    lock_passwd: true
  - name: cloudy
    gecos: Magic Cloud App Daemon User
    inactive: true
    system: true

2021-09-09 18:16:54 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
# Add groups to the system
groups:
  - secret: [root]
  - cloud-users

# Add users to the system. Users are added after groups are added.
users:
  - default
  - name: foobar
    gecos: Foo B. Bar
    primary_group: foobar
    groups: users
    expiredate: 2038-01-19
    lock_passwd: false
    passwd: $6$j212wezy$7H/1LT4f9/N3wpgNunhsIqtMj62OKiS3nyNwuizouQc3u7MbYCarYeAHWYPYb2FT.lbioDm2RrkJPb9BZMN1O/
  - name: barfoo
    gecos: Bar B. Foo
    sudo: ALL=(ALL) NOPASSWD:ALL
    groups: [cloud-users, secret]
    lock_passwd: true
  - name: cloudy
    gecos: Magic Cloud App Daemon User
    inactive: true
    system: true

2021-09-09 18:17:26 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:17:30 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:17:31 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:17:32 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:17:32 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:17:34 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-02e5a4cf7cdbbd641'))
2021-09-09 18:17:38 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-02e5a4cf7cdbbd641'))
2021-09-09 18:17:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:17:38 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:17:38 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:17:38 INFO      integration_testing:clouds.py:183 image serial: 20210907
Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:17:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
SKIPPED
------------------------------ live log teardown -------------------------------
2021-09-09 18:17:54 INFO      paramiko.transport.sftp:sftp.py:158 [chan 7] sftp session closed.

tests/integration_tests/modules/test_version_change.py::test_reboot_without_version_change Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:18:09 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:18:09 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:18:40 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:18:45 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:18:46 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:18:46 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:18:46 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:18:48 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-002694811ee10ed8a'))
2021-09-09 18:18:52 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-002694811ee10ed8a'))
2021-09-09 18:18:52 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:18:52 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:18:52 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:18:52 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:18:52 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
Restarting instance and waiting for boot
2021-09-09 18:18:53 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 18:18:53 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:18:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:18:58 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:18:59 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:19:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:19:02 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:19:03 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:20:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:20:04 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:20:04 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:20:05 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 18:20:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:20:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
2021-09-09 18:20:06 INFO      paramiko.transport.sftp:sftp.py:158 [chan 4] Opened sftp connection (server version 3)
2021-09-09 18:20:06 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mv /var/tmp/124b5dec-2e80-4fc7-89e3-9b79e9d03430.tmp /var/lib/cloud/instance/obj.pkl'
Restarting instance and waiting for boot
2021-09-09 18:20:06 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 18:20:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:20:12 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:20:12 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:20:13 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:20:14 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:20:15 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:20:16 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:21:18 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:21:18 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:21:18 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:21:19 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 18:21:19 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:21:19 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED------------------------------ live log logreport ------------------------------
2021-09-09 18:21:50 INFO      paramiko.transport.sftp:sftp.py:158 [chan 4] sftp session closed.

tests/integration_tests/modules/test_version_change.py::test_cache_purged_on_version_change Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:21:50 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:21:50 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:22:37 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:22:46 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:22:47 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:22:48 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:22:48 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:22:48 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:22:50 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-089ced9d29767eb8c'))
2021-09-09 18:22:54 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-089ced9d29767eb8c'))
2021-09-09 18:22:54 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:22:55 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:22:55 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:22:55 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:22:55 INFO      paramiko.transport.sftp:sftp.py:158 [chan 4] Opened sftp connection (server version 3)
2021-09-09 18:22:55 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mv /var/tmp/d47a6563-c61d-4f3a-a9b3-23c409f38042.tmp /var/lib/cloud/instance/obj.pkl'
2021-09-09 18:22:55 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'echo '"'"'1.0'"'"' > /var/lib/cloud/data/python-version'
Restarting instance and waiting for boot
2021-09-09 18:22:55 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 18:22:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:23:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:23:01 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:23:02 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:23:03 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:23:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:23:05 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:24:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:24:07 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:24:07 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:24:08 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 18:24:09 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:24:09 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED------------------------------ live log logreport ------------------------------
2021-09-09 18:24:55 INFO      paramiko.transport.sftp:sftp.py:158 [chan 4] sftp session closed.

tests/integration_tests/modules/test_version_change.py::test_log_message_on_missing_version_file Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:24:55 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:24:55 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=None
2021-09-09 18:25:42 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:25:42 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:25:42 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:25:44 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-00485fb24ee56fe48'))
2021-09-09 18:25:47 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-00485fb24ee56fe48'))
2021-09-09 18:25:47 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:25:48 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:25:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:25:48 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:25:48 INFO      paramiko.transport.sftp:sftp.py:158 [chan 4] Opened sftp connection (server version 3)
2021-09-09 18:25:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'mv /var/tmp/4dd9edb6-758f-481f-8a94-20c380ffc9a3.tmp /var/lib/cloud/instance/obj.pkl'
2021-09-09 18:25:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'rm /var/lib/cloud/data/python-version'
2021-09-09 18:25:48 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'rm /var/log/cloud-init.log'
Restarting instance and waiting for boot
2021-09-09 18:25:49 INFO      integration_testing:instances.py:66 Restarting instance and waiting for boot
2021-09-09 18:25:49 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:25:54 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:25:54 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:25:55 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:25:56 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:25:57 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:26:59 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:26:59 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:26:59 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:27:00 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
2021-09-09 18:27:00 INFO      pycloudlib.instance:instance.py:175 executing: sh -c 'cat /proc/sys/kernel/random/boot_id'
2021-09-09 18:27:00 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cat /var/log/cloud-init.log'
PASSED
tests/integration_tests/modules/test_write_files.py::TestWriteFiles::test_write_files[file /root/file_b64-ASCII text] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:27:31 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
write_files:
-   encoding: b64
    content: QVNDSUkgdGV4dA==
    owner: root:root
    path: /root/file_b64
    permissions: '0644'
-   content: |
        # My new /root/file_text

        SMBDOPTIONS="-D"
    path: /root/file_text
-   content: !!binary |
        /Z/xrHR4WINT0UNoKPQKbuovp6+Js+JK
    path: /root/file_binary
    permissions: '0555'
-   encoding: gzip
    content: !!binary |
        H4sIAIDb/U8C/1NW1E/KzNMvzuBKTc7IV8hIzcnJVyjPL8pJ4QIA6N+MVxsAAAA=
    path: /root/file_gzip
    permissions: '0755'

2021-09-09 18:27:31 INFO      integration_testing:clouds.py:168 Launching instance with launch_kwargs:
image_id=ami-08c4b9461c8e92d12
user_data=#cloud-config
write_files:
-   encoding: b64
    content: QVNDSUkgdGV4dA==
    owner: root:root
    path: /root/file_b64
    permissions: '0644'
-   content: |
        # My new /root/file_text

        SMBDOPTIONS="-D"
    path: /root/file_text
-   content: !!binary |
        /Z/xrHR4WINT0UNoKPQKbuovp6+Js+JK
    path: /root/file_binary
    permissions: '0555'
-   encoding: gzip
    content: !!binary |
        H4sIAIDb/U8C/1NW1E/KzNMvzuBKTc7IV8hIzcnJVyjPL8pJ4QIA6N+MVxsAAAA=
    path: /root/file_gzip
    permissions: '0755'

2021-09-09 18:27:33 INFO      paramiko.transport.sftp:sftp.py:158 [chan 4] sftp session closed.
2021-09-09 18:28:03 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:28:04 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:28:05 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:28:06 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:28:07 INFO      pycloudlib.instance:instance.py:175 executing: sh -c whoami
2021-09-09 18:28:07 INFO      paramiko.transport:transport.py:1819 Connected (version 2.0, client OpenSSH_7.6p1)
2021-09-09 18:28:08 INFO      paramiko.transport:transport.py:1819 Authentication (publickey) successful!
2021-09-09 18:28:09 INFO      pycloudlib.instance:instance.py:175 executing: cloud-init status --wait --long
Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-05c7abb92974f8065'))
2021-09-09 18:28:14 INFO      integration_testing:clouds.py:173 Launched instance: EC2Instance(key_pair=KeyPair(/home/james/.ssh/id_rsa, /home/james/.ssh/id_rsa.pub, name=james), client=<botocore.client.EC2 object at 0x7f747dfeafd0>, instance=ec2.Instance(id='i-05c7abb92974f8065'))
2021-09-09 18:28:14 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'cloud-init --version'
cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:28:14 INFO      integration_testing:clouds.py:179 cloud-init version: /usr/bin/cloud-init 21.3-1-g6803368d-0ubuntu1~18.04.2
2021-09-09 18:28:14 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'grep serial /etc/cloud/build.info'
image serial: 20210907
2021-09-09 18:28:14 INFO      integration_testing:clouds.py:183 image serial: 20210907
-------------------------------- live log call ---------------------------------
2021-09-09 18:28:14 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'file /root/file_b64'
PASSED
tests/integration_tests/modules/test_write_files.py::TestWriteFiles::test_write_files[md5sum </root/file_binary-3801184b97bb8c6e63fa0e1eae2920d7] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:28:14 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:28:14 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'md5sum </root/file_binary'
PASSED
tests/integration_tests/modules/test_write_files.py::TestWriteFiles::test_write_files[sha256sum </root/file_binary-2c791c4037ea5bd7e928d6a87380f8ba7a803cd83d5e4f269e28f5090f0f2c9a] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:28:14 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:28:14 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'sha256sum </root/file_binary'
PASSED
tests/integration_tests/modules/test_write_files.py::TestWriteFiles::test_write_files[file /root/file_gzip-POSIX shell script, ASCII text executable] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:28:14 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:28:14 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'file /root/file_gzip'
PASSED
tests/integration_tests/modules/test_write_files.py::TestWriteFiles::test_write_files[file /root/file_text-ASCII text] Detected image: image_id=bionic os=ubuntu release=bionic

-------------------------------- live log setup --------------------------------
2021-09-09 18:28:15 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
-------------------------------- live log call ---------------------------------
2021-09-09 18:28:15 INFO      pycloudlib.instance:instance.py:175 executing: sudo -- sh -c 'file /root/file_text'
PASSEDDeleting snapshot image created for this testrun: ami-08c4b9461c8e92d12

------------------------------ live log teardown -------------------------------
2021-09-09 18:29:00 INFO      integration_testing:clouds.py:204 Deleting snapshot image created for this testrun: ami-08c4b9461c8e92d12


=================================== FAILURES ===================================
____ TestPasswordListString.test_random_passwords_emitted_to_serial_console ____

self = <test_set_password.TestPasswordListString object at 0x7f747d6d1b38>
class_client = <tests.integration_tests.instances.IntegrationEc2Instance object at 0x7f747d6a7550>

    def test_random_passwords_emitted_to_serial_console(self, class_client):
        """We should emit passwords to the serial console. (LP: #1918303)"""
        try:
            console_log = class_client.instance.console_log()
        except NotImplementedError:
            # Assume that an exception here means that we can't use the console
            # log
            pytest.skip("NotImplementedError when requesting console log")
>       assert "dick:" in console_log
E       assert 'dick:' in "No Console Output [ec2.Instance(id='i-01d062d5d6f7315fd')]"

tests/integration_tests/modules/test_set_password.py:140: AssertionError
------------------------------ Captured log setup ------------------------------
2021-09-09 17:45:38 INFO      integration_testing:clouds.py:88 Detected image: image_id=bionic os=ubuntu release=bionic
=============================== warnings summary ===============================
../envs/cloud-init/lib/python3.5/site-packages/jwt/utils.py:8
  /home/james/envs/cloud-init/lib/python3.5/site-packages/jwt/utils.py:8: CryptographyDeprecationWarning: Python 3.5 support will be dropped in the next release of cryptography. Please upgrade your Python.
    from cryptography.hazmat.primitives.asymmetric.utils import (

tests/integration_tests/test_logging.py::TestVarLogCloudInitOutput::test_var_log_cloud_init_output_not_world_readable
  /home/james/envs/cloud-init/lib/python3.5/site-packages/simplestreams/mirrors/__init__.py:207: DeprecationWarning: The 'warn' method is deprecated, use 'warning' instead
    self.prefix, path)

-- Docs: https://docs.pytest.org/en/stable/warnings.html
=========================== short test summary info ============================
FAILED tests/integration_tests/modules/test_set_password.py::TestPasswordListString::test_random_passwords_emitted_to_serial_console
====== 1 failed, 120 passed, 28 skipped, 2 warnings in 6573.73s (1:49:33) ======
